# 严格模式与混杂模式

严格模式与混杂模式——如何触发这两种模式, 区分它们有何意义。

在标准模式中, 浏览器根据规范呈现页面;

在混杂模式中, 页面以一种比较宽松的向后兼容的方式显示。

浏览器根据DOCTYPE是否存在以及使用的哪种DTD来选择要使用的呈现方法。如果XHTML文档包含形式完整的DOCTYPE, 那么它一般以标准模式呈现。对于HTML 4.01文档, 包含严格DTD的DOCTYPE常常导致页面以标准模式呈现。包含过渡DTD和URI的DOCTYPE也导致页面以标准模式呈现, 但是有过渡DTD而没有URI会导致页面以混杂模式呈现。DOCTYPE不存在或形式不正确会导致HTML和XHTML文档以混杂模式呈现。
声明位于文档中的最前面的位置, 处于 标签之前。此标签可告知浏览器文档使用哪种 HTML 或 XHTML 规范。

该标签可声明三种 DTD 类型, 分别表示严格版本、过渡版本以及基于框架的 HTML 文档

1. 浏览器模式
当浏览器厂商开始创建与标准兼容的浏览器时, 他们希望确保向后兼容性。为了实现这一点, 他们创建了两种呈现模式: 标准模式和混杂模式(quirks mode)。在标准模式中, 浏览器根据规范呈现页面;在混杂模式中, 页面以一种比较宽松的向后兼容的方式显示。混杂模式通常模拟老式浏览器(比如Microsoft IE 4和Netscape Navigator 4)的行为以防止老站点无法工作。

Mozilla和Safari还有第三种模式, 称为”几乎标准的模式(almost standards mode)”, 除了在处理表格的方式上有一些细微的差异之外, 这种模式与标准模式相同。
在Firefox中, 可以使用Web Developer Extension查看页面的呈现模式。如果网站以标准模式呈现, 工具栏上会显示一个绿色的钩;若以混杂模式呈现, 则显于红色的叉。IE 8中的开发工具也显示浏览器使用的模式。

差异: 

对于这两种模式之间的差异, 最显著的一个例子与Windows上IE专有的盒模型有关。在IE 6出现时, 在标准模式中使用的是正确的盒模型, 在混杂模式中使用的则是老式的专有盒模型。为了维持对IE 5和更低版本的向后兼容性, Opera 7和更高版本也在混杂模式中使用有缺点的IE盒模型。

呈现方面的其他差异比较小, 而且是与特定浏览器相关的, 包括对于十六进制颜色值不需要#号、假设CSS中没有指定单位的长度的单位是像素, 以及在使用关键字时将字号增加一级。

2. 如何触发这两种模式:

浏览器根据DOCTYPE是否存在以及使用的哪种DTD来选择要使用的呈现方法。如果XHTML文档包含形式完整的DOCTYPE, 那么它一般以标准模式呈现。对于HTML 4.01文档, 包含严格DTD的DOCTYPE常常导致页面以标准模式呈现。包含过渡DTD和URI的DOCTYPE也导致页面以标准模式呈现, 但是有过渡DTD而没有URI会导致页面以混杂模式呈现。DOCTYPE不存在或形式不正确会导致HTML和XHTML文档以混杂模式呈现。

根据DOCTYPE是否存在选择呈现模式, 被称为DOCTYPE切换或DOCTYPE侦测。并非所有浏览器都采用这些规则, 但是这些规则很好地说明了DOCTYPE切换的工作方式。要了解更全面的内容, 可查阅网站`http://hsivonen.iki.fi/doctype/`, 这里的图表说明了不同浏览器如何根据DOCTYPE声明来选择呈现方法。

DOCTYPE切换是浏览器用来区分遗留文档和符合标准的文档的手段。无论是否编写了有效的CSS, 如果选择了错误的DOCTYPE, 那么页面就将以混杂模式呈现, 其行为就可能会有错误或不可预测。因此, 一定要在站点的每个页面上包含形式完整的DOCTYPE声明, 并且在使用HTML时选择严格的DTD。