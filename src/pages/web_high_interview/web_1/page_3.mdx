# 网络安全进阶

### 简述Web常见攻击技术？

```
Web常见攻击技术：

（1）SQL 注入：Web 应用未对用户提交的数据做过滤或者转义，导致后端数据库服务器执行了黑客提交的 sql 语句。黑客利用 sql 注入攻击可进行拖库、植入 webshell，进而入侵服务器。
（2）XSS 跨站：Web 应用未对用户提交的数据做过滤或者转义，导致黑客提交的 javascript 代码被浏览器执行。黑客利用 xss 跨站攻击，可以构造恶意蠕虫、劫持网站 cookie、获取键盘记录、植入恶意挖矿 js 代码。
（3）命令注入：Web 应用未对用户提交的数据做过滤或者转义，导致服务器端执行了黑客提交的命令。黑客利用登入注入攻击，可以对服务器植入后门、直接反弹 shell 入侵服务器。
（4）CSRF：Web 应用对某些请求未对来源做验证，导致登录用户的浏览器执行黑客伪造的 HTTP 请求，并且应用程序认为是受害者发起的合法请求的请求。黑客利用 CSRF 攻击可以执行一些越权操作如添加后台管理员、删除文章等。
（5）目录遍历：Web 应用对相关目录未做访问权限控制，并且未对用户提交的数据做过滤或者转义，导致服务器敏感文件泄露。黑客利用目录遍历攻击，可获取服务器的配置文件，进而入侵服务器。
（6）木马后门：Web 应用未对用户提交的数据做过滤或者转义，导致木马代码执行。黑客利用木马后门攻击，可以入侵服务器。
（7）缓冲区溢出：http 协议未对请求头部做字节大小限制，导致可以提交大量数据因此可能导致恶意代码被执行。
（8）文件上传：Web 应用未对文件名后缀，上传数据包是否合规，导致恶意文件上传。文件上传攻击，将包含恶意代码的文件上传到服务器，最终导致服务器被入侵。
（9）扫描器扫描：黑客利用漏洞扫描器扫描网站，可以发现 web 应用存在的漏洞，最终利用相关漏洞攻击网站。
（10）高级爬虫：爬虫自动化程度较高可以识别 setcookie 等简单的爬虫防护方式。
（11）常规爬虫：爬虫自动化程度较低，可以利用一些简单的防护算法识别，如 setcookie 的方式。
敏感信息泄露:web 应用过滤用户提交的数据导致应用程序抛出异常，泄露敏感信息，黑客可能利用泄露的敏感信息进一步攻击网站。
服务器错误：Web 应用配置错误，导致服务器报错从而泄露敏感信息，黑客可能利用泄露的敏感信息进一步攻击网站。
（12）非法文件下载：Web 应用未对敏感文件 (密码、配置、备份、数据库等) 访问做权限控制，导致敏感文件被下载，黑客利用下载的敏感文件可以进一步攻击网站。
（13）第三方组件漏洞：Web 应用使用了存在漏洞的第三方组件，导致网站被攻击。
（14）XPATH 注入：Web 应用在用 xpath 解析 xml 时未对用户提交的数据做过滤，导致恶意构造的语句被 xpath 执行。黑客利用 xpath 注入攻击，可以获取 xml 文档的重要信息。
（15）XML 注入：Web 应用程序使用较早的或配置不佳的 XML 处理器解析了 XML 文档中的外部实体引用，导致服务器解析外部引入的 xml 实体。黑客利用 xml 注入攻击可以获取服务器敏感文件、端口扫描攻击、dos 攻击。
（16）LDAP 注入防护：Web 应用使用 ldap 协议访问目录，并且未对用户提交的数据做过滤或转义，导致服务端执行了恶意 ldap 语句，黑客利用 ldap 注入可获取用户信息、提升权限。
（17）SSI 注入：Web 服务器配置了 ssi，并且 html 中嵌入用户输入，导致服务器执行恶意的 ssi 命令。黑客利用 ssi 注入可以执行系统命令。
（18）Webshell 黑客连接尝试去连接网站可能存在的 webshell，黑客可能通过中国菜刀等工具去连接 webshell 入侵服务器。
（19）暴力破解：黑客在短时间内大量请求某一 url 尝试猜解网站用户名、密码等信息，黑客利用暴力破解攻击，猜解网站的用户名、密码，可以进一步攻击网站。
（20）非法请求方法：Web 应用服务器配置允许 put 请求方法请求，黑客可以构造非法请求方式上传恶意文件入侵服务器。
（21）撞库：Web 应用对用户登入功能没做验证码验证，黑客可以借助工具结合社工库去猜网站用户名及密码。
```

### 简述SQL注入概念和原理 ？

```
SQL注入是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。
SQL 注入可影响任何使用了 SQL 数据库的网站或应用程序，例如常用的数据库有 MySQL、Oracle、SQL Server 等等。攻击者利用它，便能无需授权地访问你的敏感数据，比如：用户资料、个人数据、商业机密、知识产权等等。SQL 注入是一种最古老、最流行、也最危险的网站漏洞。


SQL注入攻击的原理是什么？
当应用程序使用输入内容来构造动态SQL语句以访问数据库时，会发生SQL注入攻击。如果代码使用存储过程，而这些存储过程作为包含未筛选的用户输入的字符串来传递，也会发生 SQL 注入。SQL注入可能导致攻击者使用应用程序登陆在数据库中执行命令。如果应用程序使用特权过高的帐户连接到数据库，这种问题会变得很亚重。在某些表单中，用户输入的内容直接用来构造动态 SQL命令，或者作为存储过程的输入参数，这些表单特别容易受到SQL注入的攻击。而许多网站程序在编写时，没有对用户输入的合法性进行判断或者程序中木身的变量处理不当，使应用程序 存在安全隐患。这样，用户就可以提交一段数据库查询的代码，根据程序返回的结果，获得一些敏感的信息或者控制整个服务器，于是SQL注入就发生了。

SQL注入是从正常的WWW端口访问,而且表面看起来跟一般的Web 页面访问没什么区别。所以目前市面的防火墙都不会对 SQL注入发出警报，如果管理员没查看 IS 日志的习惯。可能被入侵很长时间都不会发觉。但是，SQL 注入的手法相当灵活，在注入的时候会碰到很多意外的情况，需要构造巧妙的 SQL 语句，从而成功获取想要的数据。
```

### 简述XSS的概念和原理 ？

```
XSS 即（Cross Site Scripting）中文名称为：跨站脚本攻击。XSS的重点不在于跨站点，而在于脚本的执行。那么XSS的原理是：
恶意攻击者在web页面中会插入一些恶意的script代码。当用户浏览该页面的时候，那么嵌入到web页面中script代码会执行，因此会达到恶意攻击用户的目的。

反射性和DOM-baseed型可以归类为非持久性XSS攻击。存储型可以归类为持久性XSS攻击。

1.反射型
反射性XSS的原理是：反射性xss一般指攻击者通过特定的方式来诱惑受害者去访问一个包含恶意代码的URL。当受害者点击恶意链接url的时候，恶意代码会直接在受害者的主机上的浏览器执行。
反射性XSS又可以叫做非持久性XSS。为什么叫反射型XSS呢？那是因为这种攻击方式的注入代码是从目标服务器通过错误信息，搜索结果等方式反射回来的，而为什么又叫非持久性XSS呢？那是因为这种攻击方式只有一次性。
比如：攻击者通过电子邮件等方式将包含注入脚本的恶意链接发送给受害者，当受害者点击该链接的时候，注入脚本被传输到目标服务器上，然后服务器将注入脚本 "反射"到受害者的浏览器上，从而浏览器就执行了该脚本。
因此反射型XSS的攻击步骤如下：
攻击者在url后面的参数中加入恶意攻击代码。
当用户打开带有恶意代码的URL的时候，网站服务端将恶意代码从URL中取出，拼接在html中并且返回给浏览器端。
用户浏览器接收到响应后执行解析，其中的恶意代码也会被执行到。
攻击者通过恶意代码来窃取到用户数据并发送到攻击者的网站。攻击者会获取到比如cookie等信息，然后使用该信息来冒充合法用户
的行为，调用目标网站接口执行攻击等操作。
常见的有：恶意链接。

2.存储型
存储型XSS的原理是：主要是将恶意代码上传或存储到服务器中，下次只要受害者浏览包含此恶意代码的页面就会执行恶意代码。
比如我现在做了一个博客网站，然后攻击者在上面发布了一篇文章，内容是如下： 如果我没有对该文章进行任何处理的话，直接存入到数据库中，那么下一次当其他用户访问该文章的时候，服务器会从数据库中读取后然后响应给客户端，那么浏览器就会执行这段脚本，然后攻击者就会获取到用户的cookie，然后会把cookie发送到攻击者的服务器上了。
因此存储型XSS的攻击步骤如下：
攻击者将恶意代码提交到目标网站数据库中。
用户打开目标网站时，网站服务器将恶意代码从数据库中取出，然后拼接到html中返回给浏览器中。
用户浏览器接收到响应后解析执行，那么其中的恶意代码也会被执行。
那么恶意代码执行后，就能获取到用户数据，比如上面的cookie等信息，那么把该cookie发送到攻击者网站中，那么攻击者拿到该
cookie然后会冒充该用户的行为，调用目标网站接口等违法操作。

3.DOM-based型
我们客户端的js可以对页面dom节点进行动态的操作，比如插入、修改页面的内容。比如说客户端从URL中提取数据并且在本地执行、如果用户在客户端输入的数据包含了恶意的js脚本的话，但是这些脚本又没有做任何过滤处理的话，那么我们的应用程序就有可能受到DOM-based XSS的攻击。因此DOM型XSS的攻击步骤如下：
攻击者构造出特殊的URL、在其中可能包含恶意代码。
用户打开带有恶意代码的URL。
用户浏览器收到响应后解析执行。前端使用js取出url中的恶意代码并执行。
执行时，恶意代码窃取用户数据并发送到攻击者的网站中，那么攻击者网站拿到这些数据去冒充用户的行为操作。调用目标网站接口
执行攻击者一些操作。
DOM XSS 是基于文档对象模型的XSS。一般有如下DOM操作：
使用document.write直接输出数据。
使用innerHTML直接输出数据。
使用location、location.href、location.replace、iframe.src、document.referer、window.name等这些。
假如对于变量url的值是：javascript:alert(‘dom-xss’); 类似这样的，那么就会收到xss的攻击了。因此对于DOM XSS主要是由于本地客户端获取的DOM数据在本地执行导致的。因此我们需要对HTML进行编码，对JS进行编码来防止这些问题产生。
```

### 简述XSS防范方法？

```
1.cookie安全策略
在服务器端设置cookie的时候设置 http-only, 这样就可以防止用户通过JS获取cookie。对cookie的读写或发送一般有如下字段进行设置：
http-only: 只允许http或https请求读取cookie、JS代码是无法读取cookie的(document.cookie会显示http-only的cookie项被自动过滤掉)。发送请求时自动发送cookie.
secure-only: 只允许https请求读取，发送请求时自动发送cookie。
host-only: 只允许主机域名与domain设置完成一致的网站才能访问该cookie。

2.X-XSS-Protection设置
目前该属性被所有的主流浏览器默认开启XSS保护。该参数是设置在响应头中目的是用来防范XSS攻击的。它有如下几种配置：
值有如下几种：默认为1.
0： 表示关闭浏览器的XSS防护机制
1：删除检测到的恶意代码， 如果响应报文中没有看到X-XSS-Protection 字段，那么浏览器就认为X-XSS-Protection配置为1，这是浏览器的默认设置
1;mode=block：启用xss保护，并且在检查到XSS攻击是，停止渲染页面。

3.XSS防御HTML编码
如下html代码：

content
,在div标签中存在一个输出变量{content}. 那么浏览器在解析的过程中，首先是html解析，当解析到div标签时，再解析 content的内容，然后会将页面显示出来。那假如该{content} 的值是 ，因此该script脚本就会解析并且执行了，从而达到XSS的攻击目标。
因此我们需要将不可信数据放入到html标签内(比如div、span等)的时候需要进行html编码。
编码规则：将 & < > " ’ / 转义为实体字符。

4.XSS 防御HTML Attribute编码
和HTML编码一样，html中的属性也要进行编码，比如 
这样的，name是input的属性，因此在html解析时，会对name属性进行编码，因为假如{name} 的值为：" " onclick="alert('属性XSS')" " "这样的，也就是说input变成这样的了，
，input属性name被插入onclick事件了，因此也需要针对这种常规的html属性，都需要对其进行HTML属性编码。
因此我们需要将不可信数据放入html属性时(不含src、href、style 和 事件处理函数(onclick, onmouseover等))。需要进行HTML Attribute 编码。
编码规则：除了字母、数字、字符以外，使用 &#x;16进制格式来转义ASCII值小于256所有的字符。

5.XSS防御之javascript编码
在上面的 XSS 防御HTML Attribute编码中我们是可以防御XSS攻击，但是它只能防御的是HTML通用属性，并不是全部属性，在html中还存在很多支持协议解析的html属性，比如 onclick, onerror, href, src 等这些，类似这些属性我们是无法通过HTML编码来防范XSS攻击的。因为浏览器会先解析html编码的字符，将其转换为该属性的值，但是该属性本身支持JS代码执行，因此游览器在HTML解码后，对该属性的值进行JS解析，因此会执行响应的代码。

6.XSS 防御之 URL 编码
作用范围：将不可信数据作为 URL 参数值时需要对参数进行 URL 编码
编码规则：将参数值进行 encodeURIComponent 编码
function encodeForURL(str){
return encodeURIComponent(str);
};

7.XSS 防御之 CSS 编码
作用范围：将不可信数据作为 CSS 时进行 CSS 编码
编码规则：除了字母数字字符以外，使用\XXXXXX格式来转义ASCII值小于256的所有字符。

8.开启CSP网页安全政策防止XSS攻击
Content-Security-Policy 中文的意思是 网页安全政策，

CSP是网页安全政策(Content Security Policy)的缩写。主要用来防止XSS攻击。是一种由开发者定义的安全性政策申明，通过CSP所约束的责任指定可信的内容来源，通过 Content-Security-Policy 网页的开发者可以控制整个页面中 外部资源 的加载和执行。
比如可以控制哪些 域名下的静态资源可以被页面加载，哪些不能被加载。这样就可以很大程度的防范了 来自 跨站(域名不同) 的脚本攻击。
在meta属性中设置下即可：如下代码：
```

### 简述XSS与CSRF有什么区别 ？

```
首先我们要对 xss 和 csrf 进行足够的了解才能分清楚两者的区别。
xss：中文名称跨站脚本攻击，通常出现在搜索框、留言板、评论区等地方
分类：反射性、存储型、DOM 型
攻击方式：构造恶意链接，诱骗用户点击盗取用户的 cookie 信息
漏洞危害：xss 蠕虫、会话、流量劫持、网站挂马、盗取 cookie
防护方法：设置黑名单和白名单、对用户输入进行过滤、入参字符过滤、出参字符转义、设置 httponly
csrf 漏洞：中文名称跨站请求伪造，攻击者冒充用户身份执行用户操作
检测漏洞：抓取一个请求包，去掉 referer 字段进行访问，如果访问有效则存在漏洞
危害：盗用用户身份、执行用户操作，修改信息

防护方法：
1、设置 referer 字段；但是并不是所有服务器在任何时候都可以接受 referer 字段，所以这个方法存在一定的局限性
2、设置验证码；在用户操作的过程中设置身份确认的验证码，该方法会很有用，不过验证码频繁的话会影响用户体验
3、设置 token 值，在用户请求中设置一个随机没有规律的 token 值可以有效的防止攻击者利用漏洞攻击
从上我们可以总结出：
xss：跨站脚本攻击、诱骗用户点击恶意链接盗取用户 cookie 进行攻击、不需要用户进行登录、xss 除了利用 cookie 还可以篡改网页等
csrf：跨站请求伪造、无法获取用户的 cookie 而是直接冒充用户、需要用户登录后进行操作
```

### 简述为什么HTTPS更安全？

```
Https=http+TLS/SSL
TLS/SSL协议位于应用层协议和TCP之间，构建在TCP之上，由TCP协议保证数据传输的可靠性，任何数据到达TCP之前，都经过TLS/SSL协议处理。
https是加密传输协议，可以保障客户端到服务器端的传输数据安全。用户通过http协议访问网站时，浏览器和服务器之间是明文传输，这就意味着用户填写的密码、帐号、交易记录等机密信息都是明文，随时可能被泄露、窃取、篡改，被第三者加以利用。
安装SSL证书后，使用https加密协议访问网站，可激活客户端浏览器到网站服务器之间的"SSL加密通道"（SSL协议），实现高强度双向加密传输，防止传输数据被泄露或篡改。
```

### 简述什么是 CSRF 攻击，如何避免？

```
跨站请求伪造（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF， 是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。跟跨网站脚本（XSS）相比，XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任。

1、攻击细节
跨站请求攻击，简单地说，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并运行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去运行。这利用了web中用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。

例子

假如一家银行用以运行转账操作的URL地址如下：http://www.examplebank.com/withdraw?account=AccoutName&amount=1000&for=PayeeName
那么，一个恶意攻击者可以在另一个网站上放置如下代码： 
如果有账户名为Alice的用户访问了恶意站点，而她之前刚访问过银行不久，登录信息尚未过期，那么她就会损失1000资金。

这种恶意的网址可以有很多种形式，藏身于网页中的许多地方。此外，攻击者也不需要控制放置恶意网址的网站。例如他可以将这种地址藏在论坛，博客等任何用户生成信息的网站中。这意味着如果服务端没有合适的防御措施的话，用户即使访问熟悉的可信网站也有受攻击的危险。

透过例子能够看出，攻击者并不能通过CSRF攻击来直接获取用户的账户控制权，也不能直接窃取用户的任何信息。他们能做到的，是欺骗用户浏览器，让其以用户的名义运行操作。

2、防御措施
检查Referer字段
HTTP头中有一个Referer字段，这个字段用以标明请求来源于哪个地址。在处理敏感数据请求时，通常来说，Referer字段应和请求的地址位于同一域名下。以上文银行操作为例，Referer字段地址通常应该是转账按钮所在的网页地址，应该也位于www.examplebank.com之下。而如果是CSRF攻击传来的请求，Referer字段会是包含恶意网址的地址，不会位于www.examplebank.com之下，这时候服务器就能识别出恶意的访问。
这种办法简单易行，工作量低，仅需要在关键访问处增加一步校验。但这种办法也有其局限性，因其完全依赖浏览器发送正确的Referer字段。虽然http协议对此字段的内容有明确的规定，但并无法保证来访的浏览器的具体实现，亦无法保证浏览器没有安全漏洞影响到此字段。并且也存在攻击者攻击某些浏览器，篡改其Referer字段的可能。

3、添加校验token
由于CSRF的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在cookie中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再运行CSRF攻击。这种数据通常是窗体中的一个数据项。服务器将其生成并附加在窗体中，其内容是一个伪随机数。当客户端通过窗体提交请求时，这个伪随机数也一并提交上去以供校验。正常的访问时，客户端浏览器能够正确得到并传回这个伪随机数，而通过CSRF传来的欺骗性攻击中，攻击者无从事先得知这个伪随机数的值，服务端就会因为校验token的值为空或者错误，拒绝这个可疑请求。
```

### 简述什么是DNS劫持以及相关原理 ？

```
DNS劫持即域名劫持，是通过将原域名对应的IP地址进行替换，从而使用户访问到错误的网站，或者使用户无法正常访问网站的一种攻击方式。
域名劫持往往只能在特定的网络范围内进行，范围外的DNS服务器能够返回正常的IP地址。攻击者可以冒充原域名所属机构，通过电子邮件的方式修改组织机构的域名注册信息，或者将域名转让给其它主持，并将新的域名信息保存在所指定的DNS服务器中，从而使用户无法对原域名来进行解析以访问目标地址。

DNS劫持原理，需要首先了解典型的DNS解析流程。当客户端发起域名请求时，本地递归服务器（大多数情况下为运营商DNS）或公共DNS会通过向根域名服务器、顶级域名服务器到权威域名服务器一级一级查询，并将最终查询结果返回给客户端。
除了这种典型解析流程外，由于DNS缓存的存在，当客户端发起请求时，浏览器缓存、hosts文件、本地递归服务器DNS缓存会先将本地储存的解析记录直接告知客户端，从而省去全球递归查询的步骤。
从上面DNS解析流程中可以看出，一次完整的DNS查询具备以下两个特点：
链路长，查询过程包含多次、多级网络通信；
参与角色多，查询过程涉及客户端（浏览器缓存、hosts文件）、递归解析服务器、权威解析服务器等角色。
在一次完整DNS查询链路的各个环节，都可以通过技术手段将域名解析记录进行篡改，将域名指向劫持到错误的IP地址上
```

### DNS劫持的步骤是什么样的？

```
获取要劫持的域名信息：攻击者会首先访问域名查询要劫持的站点的域名信息。
控制域名响应的E-Mail账号：在获取到域名信息后，攻击者通过暴力破解或者专门的方法破解公司注册域名时使用的E-mail账号所对应的密码，更高级的攻击者甚至能够直接对E-Mail进行信息窃取。
修改注册信息：当攻击者破解了E-Mail后，会利用相关的更改功能修改该域名的注册信息，包括域名拥有者信息，DNS服务器信息等。
使用E-Mail收发确认函：在修改完注册信息后，攻击者E-Mail在真正拥有者之前收到修改域名注册信息的相关确认信息，并回复确认修改文件，待网络公司恢复已成功修改信件后，攻击者便成功完成DNS劫持。
```

### 简述如何怎么应对DNS劫持？

```
（1）安装杀毒软件，可以有效防御木马病毒和恶意软件，并定期修改路由器管理账号密码和更新固件；
（2）企业端可以设置更小的TTL值，实现DNS缓存的短时间更新，用户端可以定期刷新DNS缓存，从而让用户发起请求时尽可能去请求权威服务器，降低DNS缓存被污染的可能；
（3）加强域名账户的安全等级，使用强度较高的密码，并定期更换密码；
（4）定期查看域名账户信息、域名whois信息以及域名解析生效状态，发现异常及时联系域名服务商；
（5）选择安全技术实力过硬的域名注册商，并且给自己的域名权威数据上锁，防止域名权威数据被篡改。
（6）在客户端和递归DNS服务器通信的最后阶段中使用DNS加密技术，如DNS-over-TLS，DNS-over-HTTPS等。
```

### 简述什么是 DoS、DDoS、DRDoS 攻击？

```
DOS: (Denial of Service), 翻译过来就是拒绝服务, 一切能引起拒绝 行为的攻击都被称为 DOS 攻击。最常见的 DoS 攻击就有计算机网络宽带攻击、连通性攻击。
DDoS: (Distributed Denial of Service)，翻译过来是分布式拒绝服务。是指处于不同位置的多个攻击者同时向一个或几个目标发动攻击，或者一个攻击者控制了位于不同位置的多台机器，并利用这些机器对受害者同时实施攻击。主要形式有流量攻击和资源耗尽攻击，常见的 DDoS攻击有： SYN Flood、Ping of Death、ACK Flood、UDP Flood 等。
DRDoS: (Distributed Reflection Denial of Service)，中文是分布式反射拒绝服务，该方式靠的是发送大量带有被害者 IP 地址的数据包给攻击主机，然后攻击主机对 IP 地址源做出大量回应，从而形成拒绝服务攻击。
```

### 简述如何防范DDoS（ 基础防护措施 ）?

```
过滤不必要的服务和端口：可以使用 Inexpress、Express、Forwarding 等工具来过滤不必要的服务和端口，即在路由器上过滤假 IP。比如 Cisco 公司的 CEF (Cisco Express Forwarding) 可以针对封包 Source IP 和 Routing Table 做比较，并加以过滤。只开放服务端口成为目前很多服务器的流行做法，例如 WWW 服务器那么只开放 80 而将其他所有端口关闭或在防火墙上做阻止策略。

异常流量的清洗过滤：通过 DDOS 硬件防火墙对异常流量的清洗过滤，通过数据包的规则过滤、数据流指纹检测过滤、及数据包内容定制过滤等顶尖技术能准确判断外来访问流量是否正常，进一步将异常流量禁止过滤。单台负载每秒可防御 800-927 万个 syn 攻击包。

分布式集群防御：这是目前网络安全界防御大规模 DDOS 攻击的最有效办法。分布式集群防御的特点是在每个节点服务器配置多个 IP 地址（负载均衡），并且每个节点能承受不低于 10G 的 DDOS 攻击，如一个节点受攻击无法提供服务，系统将会根据优先级设置自动切换另一个节点，并将攻击者的数据包全部返回发送点，使攻击源成为瘫痪状态，从更为深度的安全防护角度去影响企业的安全执行决策。

高防智能 DNS 解析：高智能 DNS 解析系统与 DDOS 防御系统的完美结合，为企业提供对抗新兴安全威胁的超级检测功能。它颠覆了传统一个域名对应一个镜像的做法，智能根据用户的上网路线将 DNS 解析请求解析到用户所属网络的服务器。同时智能 DNS 解析系统还有宕机检测功能，随时可将瘫痪的服务器 IP 智能更换成正常服务器 IP，为企业的网络保持一个永不宕机的服务状态。
```

### 对称加密与非对称加密有什么区别？

```
1、加密和解密过程不同
对称加密的加密过程和解密过程使用的同一个密钥，加密过程相当于用原文+密钥可以传输出密文，同时解密过程用密文-密钥可以推导出原文。
但非对称加密采用了两个密钥，一般使用公钥进行加密，使用私钥进行解密。

2、加密解密速度不同
对称加密解密的速度比较快，适合数据比较长时的使用。非对称加密和解密花费的时间长、速度相对较慢，只适合对少量数据的使用。


3、传输的安全性不同
对称加密的过程中无法确保密钥被安全传递，密文在传输过程中是可能被第三方截获的，如果密码本也被第三方截获，则传输的密码信息将被第三方破获，安全性相对较低。
非对称加密算法中私钥是基于不同的算法生成不同的随机数，私钥通过一定的加密算法推导出公钥，但私钥到公钥的推导过程是单向的，也就是说公钥无法反推导出私钥。所以安全性较高
```

### 简述什么是对称加密技术？

```
对称加密采用了对称密码编码技术，它的特点是文件加密和解密使用相同的密钥加密

也就是密钥也可以用作解密密钥，这种方法在密码学中叫做对称加密算法，对称加密算法使用起来简单快捷，密钥较短，且破译困难，除了数据加密标准（DES），另一个对称密钥加密系统是国际数据加密算法（IDEA），它比DES的加密性好，而且对计算机功能要求也没有那么高

对称加密算法在电子商务交易过程中存在几个问题：

1、要求提供一条安全的渠道使通讯双方在首次通讯时协商一个共同的密钥。直接的面对面协商可能是不现实而且难于实施的，所以双方可能需要借助于邮件和电话等其它相对不够安全的手段来进行协商；
2、密钥的数目难于管理。因为对于每一个合作者都需要使用不同的密钥，很难适应开放社会中大量的信息交流；
3、对称加密算法一般不能提供信息完整性的鉴别。它无法验证发送者和接受者的身份；
4、对称密钥的管理和分发工作是一件具有潜在危险的和烦琐的过程。对称加密是基于共同保守秘密来实现的，采用对称加密技术的贸易双方必须保证采用的是相同的密钥，保证彼此密钥的交换是安全可靠的，同时还要设定防止密钥泄密和更改密钥的程序。

假设两个用户需要使用对称加密方法加密然后交换数据，则用户最少需要2个密钥并交换使用，如果企业内用户有n个，则整个企业共需要n×(n-1) 个密钥，密钥的生成和分发将成为企业信息部门的恶梦。
常见的对称加密算法有DES、3DES、Blowfish、IDEA、RC4、RC5、RC6和AES
```

### 简述什么是非对称加密技术 ？

```
与对称加密算法不同，非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。

公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。

非对称加密算法实现机密信息交换的基本过程是：甲方生成一对密钥并将其中的一把作为公用密钥向其它方公开；得到该公用密钥的乙方使用该密钥对机密信息进行加密后再发送给甲方；甲方再用自己保存的另一把专用密钥对加密后的信息进行解密。甲方只能用其专用密钥解密由其公用密钥加密后的任何信息。
```

### RSA和AES算法有什么区别？

```
先了解下AES和RSA的区别，前者属于 对称加密 ，后者属于 非对称加密 。
1、对称加密
对称加密就是加密和解密使用同一个密钥。
用数学公示表示就是：
▲加密：Ek(P) = C
▲解密：Dk(C) = P
这里E表示加密算法，D表示解密算法，P表示明文，C表示密文。
是不是看起来有点不太容易理解？看下图：
看过间谍局的知友们一定知道电台和密码本的功能。潜伏里面孙红雷通过电台收听到一堆数字，然后拿出密码本比对，找到数字对应的汉字，就明白上级传达的指令。而军统的监听台没有密码本，只看到一堆没有意义的数字，这就是对称算法的原理。
AES就属于对称加密 ，常见的对称加密方法还有DES、3DES、Blowfish、RC2以及国密的SM4。
2、非对称加密
对称加密快而且方便，但是有个缺点——密钥容易被偷或被破解。非对称加密就可以很好的避免这个问题。
非对称算法 把密钥分成两个 ，一个自己持有叫 私钥 ，另一个发给对方，还可以公开，叫 公钥 ，用公钥加密的数据只能用私钥解开。
▲加密： E公钥(P) = C
▲解密:：D私钥(C) = P
这下就不用担心密钥被对方窃取或被破解了，私钥由自己保管。
非对称加密算法核心原理其实就是设计一个数学难题，使得用公钥和明文推导密文很容易，但根据公钥、明文和密文推导私钥极其难。
RSA 就属于非对称加密，非对称加密还有Elgamal、背包算法、Rabin、D-H、ECC（椭圆曲线加密算法）以及国家商用密码SM2算法。
3、AES和RSA
AES和RSA都很安全，至少在目前的计算机体系结构下，没有任何有效的攻击方式。量子计算机时代，RSA有一定的破绽，因为利用shro's algorithm，量子计算机穷举计算质因子速度可以提高N个数量级，能够在有限的时间内破解RSA密钥。AES256至少目前并没有什么明显的漏洞。
AES作为对称加密技术，加密速度很快。 现在高端一点的CPU都带有AES-NI指令，可以极快的完成加密和解密。
举例来说，坚果云存储系统采用了intel 的AES-NI加速，在采用AES加密和解密的时候，
单核的性能可以超过 1GB Byte/秒，非常非常快，很适合对大量数据进行加解密。
但是AES作为对称加密技术，如何安全的分发密钥是一个难题。通过任何方式传递密钥都有泄密的风险。当然，目前我国高大上的量子通信技术或许能很好的解决这个问题。
RSA作为非对称加密技术的代表， 加解密的速度其实相当慢，只能对小块的数据进行加解密。但是其非对称的特点，满足公钥可以随处分发，只有公钥能解密私钥加密的数据，只有私钥能解密公钥加密的数据。所以很适合用来进行密钥分发和身份验证，这两个应用场景刚好相反。
1）用于对称秘钥分发的场景，其他人用公钥加密对称的秘钥，那么只有授权人才持有私钥，因此才能解密获得对应的秘钥，解决了AES密钥分发的难题；
2）对于身份验证的场景，授权人用私钥加密一段指令，其他人用公钥解密对应的数据，验证对应的指令与之前约定的某些特征一致（例如，这段话必须使用四川口音，像是坚果云CEO
的标准四川口音==），如果一致，那么可以确认这个指令就是授权人发出的。
相关趣闻轶事：
RSA除了是一个伟大的发明，被免费开放给所有互联网用户使用。它的发明者还以此成立了一家名为 RSA Security 的网络安全公司，这家公司最后被EMC高价收购。这是德艺双馨的伟大证明， 是“又红又专”的典范。
RSA的算法是以三个发明者的名字命名的，三位都是成功的数学家，科学家和企业家，其中的排名第一Ron Rivest，有非常多的杰出贡献。
RSA是整个互联网数据安全的基础，与光纤处于同样基础和重要的方式。 大部分的加密和解密的应用都是同时应用RSA和AES。
总结
破解加密的难度除了跟 加密方法 有关，还跟 密钥长度 以及 加密模式 有很大的关系，就拿AES来说，有AES128和AES256（ 代表密钥长度 ），显然AES256的安全性能比AES128更高，而AES又要四种模式：ECB、CBC、CFB、OFB（ 代表加密模式 ）。
RSA1024是属于非对称加密，是基于大整数因式分解难度，也就是两个质数相乘很容易，但是找一个大数的质因子非常困难。量子计算机时代，RSA有一定的风险，具体可以参考： 超链接
AES256目前没有明显的漏洞，唯一的问题就是如何安全的分发密钥。
现在大部分的加密解密都是同时应用RSA和AES，发挥各自的优势，使用RSA进行密钥分发、协商，使用AES进行业务数据的加解密。
```

### 简述什么是文件上传漏洞 ？

```
文件上传漏洞是指 Web 服务器允许用户将文件上传至其文件系统，但这些文件可能并没有经过充分的验证，如文件名称、类型、内容或大小等。未能正确执行这些限制就意味着即使最基本的图像上传功能也可能用于上传任意具有潜在危险的文件，里面甚至包括远程代码执行的服务器端脚本文件。
在某些情况下，上传文件的行为本身就足以造成损害，其他攻击对该文件后续 HTTP 的请求，通常是为了触发服务器执行该文件。

文件上传漏洞出现原因：
造成文件上传漏洞的原因主要是在于开发者对代码开发没有考虑文件格式后缀的合法性校验或者是否只在前端通过 JS 脚本进行后缀检验，在向日葵看来，关键原因还是在于代码的严谨性不够健全才会导致此类漏洞出现。

文件上传漏洞危害：
上传漏洞与 SQL 注入或 XSS 相比，其风险更大，如果 Web 应用程序存在上传漏洞，攻击者上传的文件是 Web 脚本语言，服务器的 Web 容器解释并执行了用户上传的脚本，导致代码执行。如果上传的文件是 Flash 的策略文件 crossdomain.xml，黑客用以控制 Flash 在该域下的行为。
如果上传的文件是病毒、木马文件，黑客用以诱骗用户或者管理员下载执行。如果上传的文件是钓鱼图片或为包含了脚本的图片，在某些版本的浏览器中会被作为脚本执行，被用于钓鱼和欺诈。甚至攻击者可以直接上传一个 webshell 到服务器上 完全控制系统或致使系统瘫痪。
```

### 如何防范文件上传漏洞 ？

```
根据允许扩展名的白名单而不是禁止扩展名的黑名单来检查文件扩展名，猜测希望允许哪些扩展比猜测攻击者可能尝试上传哪些扩展要容易的多。
确保文件名不包含任何可能被解释为目录或遍历序列（../）的子字符串。
重命名上传的文件以避免可能导致现有文件被覆盖的冲突。
在完全验证之前不要将文件上传到服务器的文件系统中。
尽可能使用已建立的框架来预处理文件上传，而不是尝试编写自己的验证机制。
```

### 怎样高效进行数据的本地备份 ？

```
正确了解产品需要备份的文件和数据库对数据恢复是极其重要的。

物理服务器包含
实际上，所有备份产品都需要在物理服务器级别进行一些初始安装和配置。要使文中提到的任何策略起作用，必须首先在数据中心的每个物理服务器上安装适当的软件和授权。每个VMware或Hyper-V服务器，每个物理UNIX或Windows服务器以及正在备份的任何云服务，在备份系统执行操作之前，必须有人进行初始连接和身份验证。

在备份系统中包括文件，对象或数据库的最常见方法是在配置给定系统的备份时手动选择它们。这是三个示例：

在vCenter或Hyper-V控制面板中单击，然后手动选择要备份的VM
从所有数据库列表中手动选择一个或多个数据库
手动选择一个或多个文件系统或子目录
这是最常用的方法，原因在于它符合人们的思维方式。他们想要执行备份，因此他们指定了要备份的内容。它还有助于最大程度地减少没有价值的备份数据量，因为很少有人会选择测试VM或数据库或UNIX上的文件系统（例如/ tmp）。

随着时间的流逝，选择性包含的问题是什么。如果仅备份您手动选择的系统，那么更改配置后会发生什么？例如，将新的VM添加到给定的VMware服务器时会发生什么？如果将给定的VM从VMware迁移到Hyper-V甚至是云，会发生什么？如果您在VMware中手动选择它，则当它移至其他配置时将不会自动开始备份。备份专家通常会警告此类备份选择方法，因为数据丢失的风险太高了。

自动收录
将给定的VM或数据库服务器添加到备份配置后，另一种非常常见的方法是在指定应备份中找到所有VM，数据库或文件系统，这是包含备份的最安全方法，因为它可确保备份每个新数据源。它解决了有关选择性包含的问题，因为VM（或从一种配置类型转移到另一种配置的VM）将自动备份，而无需通知任何人。

有人说，这种方法实际上确保了它将备份毫无价值的数据。确实如此，这还可以确保您将自动备份重要数据。选择性包含的最坏情况是，没有备份真正重要的文件系统，数据库或VM。使用自动包含系统，最坏的情况是您还要备份垃圾。

选择性排除
此技术通常与自动包含系统结合使用。客户将其备份系统配置为备份每个VM，数据库或文件系统，但排除列表中明确指出的除外。选择性排除也是一种吃蛋糕的方法，因为它允许您使用自动包含来确保备份所有重要数据，同时还可以自动排除已知的毫无价值的数据。

这可以在UI中完成，在该UI中，客户单击并手动选择他或她认为没有任何价值的驱动器或数据库。试图节省空间的管理员可以将测试数据库或BM或/ tmp之类的文件系统添加到排除列表中，以确保不浪费空间。

设置选择性排除的另一种方法是使用通配符或正则表达式来标识不应备份的内容。例如，可以将* .tmp，。bak，。cache指定为通配符排除模式；使用这些扩展名找到的所有文件都不会备份。那些熟悉正则表达式的人可以变得很有创意，以便无论在何处都可以排除特定类型的文件。

基于标签的包含
在备份中包括数据的一种非常现代的方法是使用标签，该标签在VM世界中非常普遍。这样，您不仅可以指定具有特定标签的VM的备份方式，还可以指定备份方式。例如，您可以指定应使用将以特定方式处理这些VM的数据库备份策略来备份具有#database标签的VM。对于带有＃fileserver，＃test等＃标签的VM，情况也是如此。您可以创建几种具有特定行为的备份策略，然后通过＃标签将这些策略应用于不同的VM。

这是一种自动包含的形式，因为任何新的VM都会根据井号自动添加到适当的备份策略中。您还可以继续使用自动排除系统，以确保不会备份垃圾数据。

默认包含
每当使用自动包含或基于标记的包含时，您都需要某种包罗万象的机制。例如，如果未通过某种类型的主题标签或其他机制自动选择VM或数据库，则需要确保仍对其进行备份。您使用诸如基于标签的包含之类的智能系统的次数越多，默认包含系统就变得越重要。

如果您的备份系统支持它，则它的工作方式如下：自动策略或基于标签的策略尚未选择的任何VM或数据库都将被该策略备份。显然，该策略将不会针对特定系统的需求进行调整，但是至少正在进行某种备份。然后，您可以监视此特定策略，以查看是否曾经使用默认包含系统备份任何系统。如果是这样，也许您应该检查原因，并通过将它们放入适当类型的备份配置中来解决。

请记住备份系统设计的这一基本规则：您不能还原尚未备份的内容。没有人因为备份过多的数据而被解雇，但是许多人因为没有备份足够的数据而被解雇。尽最大努力消除浪费的备份，但要谨慎行事。与不备份毫无价值的数据相比，应更加关注不备份的数据。那应该可以帮助您避免创建许多人所说的简历制作活动。
```

### 简述什么是 DNS 以及工作原理 ？

```
DNS是一种将域名映射到IP地址的分布式命名系统。DNS的主要作用是将用户友好的域名转换为计算机可以理解的IP地址，以便将用户的请求路由到正确的服务器。
DNS的工作原理：
1、用户在浏览器中输入一个域名，例如www.example.com。
2、操作系统向本地DNS服务器发送一个DNS查询请求，询问域名www.example.com的IP地址。
3、如果本地DNS服务器具有存储在其缓存中的www.example.com的IP地址，它将返回该IP地址。
4、如果本地DNS服务器不知道www.example.com的IP地址，它将向根DNS服务器发出查询请求。
5、根DNS服务器将指导本地DNS服务器转到负责.com域的顶级DNS服务器。
6、本地DNS服务器将向.com顶级DNS服务器发出查询请求，请求www.example.com的IP地址。
7、.com顶级DNS服务器将指导本地DNS服务器转到负责example.com的权威DNS服务器。
8、本地DNS服务器将向example.com的权威DNS服务器发出查询请求，请求www.example.com的IP地址。
9、权威DNS服务器将返回www.example.com的IP地址，本地DNS服务器将缓存该结果并将其返回给操作系统。
10、操作系统将使用IP地址来连接到www.example.com的服务器，以获取所需的网页或其他资源。
```

### 简述什么是DNS欺骗以及工作原理 ？

```
DNS欺骗攻击是指攻击者冒充DNS服务器，向DNS查询发送与合法服务器所发送的答案不同的答案。
攻击者可以向受害者的查询发送他想要的任何答案，包括主机的虚假IP地址或其他类型的虚假信息。这可以被用来引导用户到一个设计得像另一个网站的网站，或发出关于网络上服务的虚假信息。
简而言之，攻击者可能在用户不知情的情况下欺骗他们访问一个有害的网站。DNS欺骗是指任何试图改变返回给用户的DNS记录并将其重定向到恶意网站的行为。

它可以被用于各种恶意的目的，包括。
分发恶意软件、勒索软件和网络钓鱼骗局
收获用户信息
为其他类型的网络犯罪提供便利。

DNS欺骗的工作原理是什么？
DNS服务器将域名转换为IP地址，以便人们能够连接到网站。如果黑客想把用户送到恶意网站，他们首先必须改变他们的DNS设置。这可以通过利用系统中的弱点或通过蛮力攻击来实现，在蛮力攻击中，黑客会尝试数以千计的不同组合，直到他们找到一个有效的组合。

第1步 - 侦察
成功攻击的第一步是侦查--尽可能多地了解目标的信息。黑客会研究你的商业模式、员工网络结构和安全政策，以了解他们应该要求什么样的信息以及如何获得这些信息。
第2步 - 访问
一旦他们收集到关于目标的足够信息，他们将试图通过利用漏洞或使用暴力方法来访问系统。一旦他们有了访问权，他们可能会在系统上安装恶意软件，以允许他们监控流量并提取敏感数据。攻击者可以发送声称来自合法计算机的数据包，这将使它们看起来像是来自其他地方。
第3步 - 攻击
当名称服务器收到这些数据包时，它将把它们存储在其缓存中，并在下次有人查询该信息时使用它们。当授权用户试图访问一个授权网站时，他们将被重定向到一个未经授权的网站。
```

### 如何有效的防止DNS欺骗 ？

```
1. 实施DNS欺骗检测机制
DNSSEC是针对这一问题提出的解决方案之一。DNSSEC是DNS的一个扩展，为记录提供认证和完整性，并提供DNS服务器的非权威数据。它确保响应在传输过程中不被篡改。它还为客户和服务器之间的数据通信提供保密性，因此只有那些拥有有效证书的人才能解密。

2. 进行彻底的DNS流量过滤
DNS流量过滤是检查你的网络上所有传入和传出流量的过程。这使你能够阻止任何可疑的活动在你的网络上发生。你可以通过使用防火墙或其他提供这种功能的安全软件来做到这一点。

3. 定期给DNS服务器打补丁
定期对操作系统、应用程序和数据库进行安全更新。

4. 使用虚拟专用网络（VPN）。
如果你无法获得HTTPS连接，那么就使用可靠的VPN。VPN在你的电脑和你正在访问的网站或服务之间建立一个加密的隧道。因为它们在两个方向上对流量进行加密，防止互联网服务供应商看到你正在访问的网站以及你正在发送或接收的数据。

5. 使用防火墙
在每个连接到互联网的系统上安装防火墙。防火墙将阻止所有未被网络管理员明确允许的传入连接。

6. 使用电子邮件认证协议
您可以使用 MTA-STS来缓解DNS欺骗。保存在MTA-STS策略文件中的条目，通过HTTPS下载，与你的MTA的MX记录通过DNS查询进行比较。MTA还缓存MTA-STS策略文件，使DNS欺骗攻击更难执行。
你可以通过启用TLS-RPT来监控和解决可送达性问题，允许收件人通过SMTP TLS报告发送至你的电子邮件地址。这将有助于你及时了解未加密连接的问题。

7. 启用DNS查询的记录和监控
启用DNS查询的记录和监控，以便你可以跟踪对你的DNS服务器进行的任何未经授权的更改。
```

### 解释什么是三次握手四次挥手?TCP为什么要三次握手?

```
三次握手指的是在TCP建立连接时，客户端和服务器之间需要进行三次数据交换的过程。

1、客户端向服务器发送一个SYN数据包，表示请求建立连接。
2、服务器收到SYN请求，向客户端发送一个SYN+ACK数据包，表示确认请求并同意建立连接。
3、客户端收到服务器的SYN+ACK请求，向服务器发送一个ACK数据包，表示确认连接已建立。

四次挥手指的是在TCP关闭连接时，客户端和服务器之间需要进行四次数据交换的过程。

1、客户端向服务器发送一个FIN数据包，表示请求关闭连接。
2、服务器收到FIN请求，向客户端发送一个ACK数据包，表示确认收到请求。
3、服务器向客户端发送一个FIN数据包，表示服务器也请求关闭连接。
4、客户端收到服务器的FIN请求，向服务器发送一个ACK数据包，表示确认收到请求，连接正式关闭。

tcp为什么要三次握手?
主要是为了保证连接的可靠性。在建立连接的过程中，需要确保双方的收发能力正常，否则连接建立后无法正常通信。通过三次握手，可以确保客户端和服务器之间的信息传递正常，并且防止网络中的延迟数据包误认为是有效的连接请求
```

### 简述Http长连接和短连接的区别 ？

```
HTTP 短连接是指客户端向服务器发送一次请求后，服务器返回响应后立即关闭连接。这种方式的优点是可以节省服务器资源，但每次请求都需要建立新的连接，可能会增加请求的延迟，降低性能。

HTTP 长连接是指客户端和服务器之间建立一次连接后，在此次连接上进行多次请求和响应。这种方式的优点是可以减少建立连接的开销，提高性能，但会增加服务器资源的占用。

需要注意的是，HTTP 长连接并不是一直保持开放的连接，而是在一定时间内保持连接状态。在超过一定时间后，如果没有新的请求和响应，连接会自动关闭，以释放服务器资源
```

### TCP如何保证可靠传输?

```
1、序列号和确认应答机制：每个TCP报文段都有一个唯一的序列号，用来标识报文段在数据流中的位置。TCP接收方收到报文后，会发送一个确认应答，告诉发送方哪些数据已经接收到。如果发送方没有收到确认应答，会重发该报文段。

2、滑动窗口机制：TCP使用滑动窗口机制来控制发送方发送的数据量。接收方会告诉发送方自己的接收窗口大小，发送方就会根据接收方的窗口大小来发送数据。如果发送方发送的数据量超过接收方的窗口大小，接收方就会拒绝接收多余的数据。

3、超时重传机制：如果发送方没有收到确认应答，就会认为该数据丢失了，会重新发送该数据。发送方会根据计时器来确定重传的时间间隔和次数，以保证数据的可靠传输。

4、拥塞控制机制：TCP使用拥塞控制机制来控制网络中的流量，以防止网络拥塞。如果网络中出现拥塞，TCP会降低发送方的发送速率，以减少网络拥塞的程度。
```

### 简述什么是SSL? https是如何保证数据传输的安全（SSL是怎么工作保证安全的）

```
SSL用于在网络上进行安全通信。SSL的主要目的是为了保护在网络上传输的数据的安全性、完整性和机密性。
HTTPS是在HTTP协议上加入SSL/TLS协议的安全协议，可以确保网站与客户端之间的通信是加密的、安全的。
HTTPS是如何保证数据传输的安全呢？

1、加密：SSL/TLS协议使用对称加密和非对称加密结合的方式，保证数据在传输过程中的安全性。对称加密用于加密数据，非对称加密用于在客户端和服务器之间交换密钥。
2、鉴别：证书机构颁发的证书用于验证服务器的身份和公钥，防止中间人攻击和欺骗。
3、完整性：SSL/TLS协议使用消息摘要算法，通过对消息进行哈希运算生成消息摘要，以确保在传输过程中的数据完整性。
```

### 简述如何保证公钥不被篡改?

```
1、数字签名：在公钥发布之前，将公钥使用私钥进行数字签名，这样在验证公钥时，只需验证数字签名即可确定公钥的真实性。
2、公钥基础设施（PKI）： PKI是一组技术和协议，用于管理数字证书和公钥，确保公钥的安全性和可靠性。
3、公钥哈希：将公钥进行哈希处理，然后将哈希值公布出来，这样可以确保公钥未被篡改。
4、物理保护：将公钥存储在物理设备中，如智能卡或USB密钥，可以保护公钥免受篡改
```

### 简述常用的渗透工具有哪些 ?

```
1、Burp Suite
2、SQLmap
3、Nmap
4、kali linux
5、Hydra
6、瑞士军刀
常用的工具有：
1、Burp Suite
2、SQLmap
3、Nmap
4、kali linux
5、Hydra
6、瑞士军刀
```

### 解释什么是云安全 ？

```
云安全是指在云计算环境下保护云端和云端相关资源的安全性。云安全包括保护云计算基础设施的安全、云服务提供商和云用户之间的安全关系、以及云中存储和处理的数据的安全性。

云安全需要采取一系列的措施来保障云计算环境的安全性，这些措施包括但不限于：

1、认证和访问控制：确保只有授权的用户能够访问云服务和云中存储的数据。
2、数据保护：采用数据加密、备份、灾备等措施来保护云中存储的数据的安全性。
3、网络安全：保障网络的可靠性和安全性，防止网络攻击。
4、合规性：确保云服务的合规性，满足相关的法律法规和标准要求。
5、安全监控和日志审计：通过监控和审计云中的操作和活动，发现和应对安全事件和威胁。
```

### 简述什么是WebSocket ？

```
WebSocket 由多个标准构成：WebSocket API 是 W3C 定义的，而 WebSocket 协议(RFC 6455)及其扩展则由 HyBi Working Group(IETF)定义。

WebSocket 可以实现客户端与服务器间双向、基于消息的文本或二进制数据传输。WebSocket 连接远远不是一个网络套接字，因为浏览器在这个简单的 API 之后隐藏了所有的复杂性，而且还提供了更多服务：

连接协商和同源策略;
与既有 HTTP 基础设施的互操作;
基于消息的通信和高效消息分帧;
子协议协商及可扩展能力。
WebSocket 是浏览器中最通用最灵活的一个传输机制，其极简的 API 可以让我们在客 户端和服务器之间以数据流的形式实现各种应用数据交换（包括 JSON 及自定义的 二进制消息格式），而且两端都可以随时向另一端发送数据。

不过，自定义数据交换协议的问题通常也在于自定义。因为应用必须考虑状态管理、 压缩、缓存及其他原来由浏览器提供的服务。设计限制和性能权衡始终会有，利用 WebSocket 也不例外。简单来说，WebSocket 并不能取代 HTTP、XHR 或 SSE，而为了追求最佳性能，关键还是要利用这些机制的长处
```

### 简述防止XSS，前端后端的相关措施分析 ?

```
前端：
1）使用HTTPS协议来保护用户数据和传输数据。
2）使用转义字符来过滤用户输入的特殊字符，以防止攻击者注入恶意的JavaScript代码。
3）禁止用户上传可执行文件，如.exe、.vbs等。
4）使用HTTP头来限制网页内容的加载，以防止XSS攻击。

后端：
1）使用参数校验来检查用户输入的数据是否符合要求，如果不符合要求，则拒绝访问。
2）使用预编译语句来执行SQL查询，以防止SQL注入攻击。
3）使用安全的加密算法来加密数据，以防止数据泄露。
4）使用安全的HTTP头来限制网页内容的加载，以防止XSS攻击。
```

### 如何防护一个服务器网络端口的安全?

```
1. 使用防火墙：防火墙可以阻止未经授权的网络流量进入网络，从而保护端口安全。
2. 安装安全软件：安装安全软件可以检测和阻止恶意软件和病毒的入侵，从而保护端口安全。
3. 实施安全策略：实施安全策略可以限制用户访问特定端口，从而保护端口安全。
4. 定期更新操作系统：定期更新操作系统可以修复漏洞，从而保护端口安全。
5. 加密数据传输：使用加密技术可以保护数据传输，从而保护端口安全。
```

### 请列举Web常用的加密算法 ？

```
1. MD5：Message-Digest Algorithm 5，信息摘要算法，常用于文件校验。
2. SHA：Secure Hash Algorithm，安全散列算法，常用于数字签名等安全认证场景。
3. HMAC：Hash Message Authentication Code，散列消息鉴别码，常用于消息完整性校验。
4. AES：Advanced Encryption Standard，高级加密标准，常用于数据加密。
5. RSA：Rivest-Shamir-Adleman，常用于数字签名和加密。
6. DES：Data Encryption Standard，数据加密标准，常用于加密和解密。
7. 3DES：Triple DES，三重数据加密算法，是DES的一种改进版本。
8. Blowfish：一种对称加密算法，可以用来加密大量数据。
9. Twofish：一种对称加密算法，可以用来加密大量数据。
10. RC4：一种流加密算法，可以用来加密大量数据。
11. PBKDF2：Password-Based Key Derivation Function 2，基于密码的密钥派生函数2，常用于加密口令。
12. Bcrypt：一种密码散列函数，可以用来加密口令。
13. SCrypt：一种密码散列函数，可以用来加密口令。
14. Argon2：一种密码散列函数，可以用来加密口令。
```

### 简述什么是运营商（或其他）网络劫持 ？

```
1、当网络劫持发生时，请求被运营商（或其他劫持者）拦截，由他们发送响应。劫持者可能会插入恶意内容，植入广告，并通过注入脚本对内容进行修改。劫持者可能会拦截特定的内容以及用户的HTTP请求，从而控制用户的浏览体验。
2、网络劫持可能会导致安全和隐私问题，因为劫持者可以收集用户的敏感信息，例如用户凭据和登录信息。它还可能导致网络流量减少，并且由于广告和注入的脚本，网页可能会变得非常缓慢。
3、要避免网络劫持，可以使用SSL/TLS协议保护通信，在发送敏感数据之前进行网站验证，并使用一款受信任的VPN来加密通信。此外，还应该定期更新设备的操作系统和浏览器，并只从可信的源下载软件或应用程序。
4、要继续防止网络劫持，应该禁用网络中的一些危险的功能，例如域名服务器（DNS）的动态更新，DNS重定向，以及远程访问功能。另外，还应设置安全软件来帮助检测潜在的网络劫持活动。最后，运营商可以设置灰度测试策略来帮助发现违规活动。
```

### 简述有哪些网络安全事件应急响应 ？

```
网络安全事件应急响应是指在发生网络安全事件时，企业应组织有关部门统一协调，根据网络安全应急响应计划或网络安全事件预案的要求，及时采取相应的应对措施。
它包括：
（1）应急预案设计：进行安全事件预测和分析，制定网络安全应急响应计划和网络安全事件处置预案，以应对网络安全事件。
（2）故障消除：组织资源进行安全故障分析，查明故障原因并消除故障源。
（3）事件处理：对网络安全事件进行识别，分析和处理，以及健全后续处理流程。
（4）控制措施落实：制定、落实有效的管理措施，防止网络安全事件的再次发生。
（5）风险预警：建立网络安全风险预警系统，严格完善网络安全管理，从而及时防范网络安全事件。
（6）数据处置：收集、处理和存储处置期间涉及的所有数据，避免安全事件再次发生。
（7）应急测试：分析处理后的网络安全状态，实施应急测试，确保安全恢复后的网络安全可用性。
（8）应急评估：对安全事件处置作出总结，评估应急处置效果，并采取有效的改进措施，减少安全事件的发生几率。
（9）安全意识培训：对员工进行网络安全意识培训，增强员工的网络安全意识，使其熟悉网络安全技术、安全风险评估技术及网络安全威胁信息处理技术，预防网络安全事件发生。
（10）复查审计：定期复查审计网络安全事件及应急响应活动，以及建立长期的安全应急响应机制。
```

### 简述常见企业内部安全的关注点和板块 ？

```
企业内部安全管理是指企业内部管理机构对企业内部安全状况的管理，包括安全管理制度、安全管理措施、安全管理机构和安全管理人员等。
1、制定安全管理制度：企业应制定安全管理制度，明确安全管理的职责、权限和程序，确保安全管理的有效实施。
2、实施安全管理措施：企业应根据安全管理制度，采取有效的安全管理措施，确保企业内部安全状况的稳定。
3、建立安全管理机构：企业应建立安全管理机构，负责安全管理工作，确保安全管理的有效实施。
4、培训安全管理人员：企业应定期对安全管理人员进行培训，使其具备安全管理的知识和技能，确保安全管理的有效实施。
继续
5、定期检查安全状况：企业应定期检查企业内部安全状况，及时发现安全隐患，采取有效措施，确保企业内部安全状况的稳定。
6、及时处理安全事故：企业应及时处理安全事故，分析事故原因，采取有效措施，防止安全事故的发生。
7、定期评估安全管理：企业应定期评估安全管理的效果，及时发现安全管理中存在的问题，采取有效措施，确保安全管理的有效实施。
8、定期更新安全管理制度：企业应定期更新安全管理制度，使其与企业实际情况相适应，确保安全管理的有效实施。
9、定期开展安全宣传：企业应定期开展安全宣传，使员工充分了解安全管理的重要性，确保安全管理的有效实施。
10、建立安全档案：企业应建立安全档案，记录安全管理的相关信息，便于安全管理的有效实施。
```

### 简述常见文件上传验证的绕过方式有哪些 ？

```
常见文件上传验证的绕过方式有：

1 JavaScript 验证绕过：JavaScript 验证就是所谓的客户端验证，也是最脆弱的一种验证。直接修改数据包或禁用 JavaScript 即可绕过。

2 content-type 验证绕过：content-type 验证，最常见的是判断 content-type 是否为 image/gif。对于这种验证直接修改数据包中的 content-type 为 image/gif 即可。

3 黑名单检测绕过：黑名单检测是常见的一种上传验证方式，不允许上传黑名单中存在的扩展名，其安全性低于白名单检测，对其的绕过方式也远多于白名单检测。

4 白名单检测绕过：白名单检测安全性远高于黑名单检测，仅允许上传白名单所允许的几种扩展名，因此黑名单中的大小写混淆、特殊的扩展名等绕过方式对白名单检测均无效。但仍可以用截断上传、解析漏洞、特别文件名构造对其进行绕过。

5 对危险扩展名 POST 检测的绕过：在开发中，为了方便维护和更新，会先对扩展名进行验证，如果上传文件的扩展名为可执行脚本，便会对其 POST 的数据进行检测，如果存在恶意代码就会禁止上传。而对于这类上传检测的绕过大致有这几种思路，一是利用变种木马绕过其检测；二就是用包含文件对其进行绕过。

6 服务器目录限制的绕过：有的 Web 应用程序本身对扩展名并没有什么验证，而是在服务器上对上传目录允许上传的文件扩展名进行限制。而对于这类防御方法，如果能控制上传路径即能成功绕过了。
```

### 对于Cookie会测试哪些内容 ？

```
1. 检查cookie值是否符合预期。
2. 测试cookie是否按照设定的有效期，被正确删除。
3. 检查cookie是否存在安全漏洞。
4. 测试cookie是否以安全的方式存储在客户端。
5. 检查cookie的值是否跨站点跟踪，该类型的cookie用于非法目的。
6. 测试cookie在不同浏览器上的兼容性。
7. 检查cookie的值是否已编码，以防止攻击者获取有效数据。
8. 检查uri路径是否正确设置，以确保cookie正确发送。
9. 检查cookie的首选项设置是否严格，以确保安全性。
10. 检查发送到cookie的所有数据是否被编码、压缩或加密，以防止未经授权的第三方访问。
```

### 说出几个业务逻辑漏洞类型?

```
1. 权限控制漏洞：攻击者利用漏洞绕过系统的访问限制，获取高权限的未授权的访问权限。
2. 功能攻击漏洞：攻击者恶意篡改文件结构或系统信息，达到辅助操作的想要的效果。
3. 越权漏洞：攻击者利用漏洞获取具有非授权访问权限的受保护的系统资源访问权限。
4. 数据控制漏洞：攻击者可以利用漏洞篡改系统中一些受保护的数据和信息，更改其原有的用途。
5. 虚拟化漏洞：通过攻击者获取被保护的虚拟机资源或访问被控制的专用虚拟机中的数据。
6. 特权升级漏洞：攻击者以一般用户的身份登录，通过漏洞获得系统的最高权限。
7. 数据库漏洞：攻击者也可以通过注入、数据库暴力破解等手段访问系统的受保护的数据库信息。
8. 覆盖签名攻击：攻击者篡改交互双方通信中的数据，伪造返回信号以达到冒充另一方的目的。
9. 缓冲区溢出漏洞：攻击者利用缓冲区内容溢出获取系统内存中的受保护数据。
10. 会话固定漏洞：攻击者利用会话固定技术，获取其他用户的身份信息。
```

### 如何保障登录页面安全的思路分析 ？

```
1. 检测页面中的客户端和服务端漏洞，如XSS，SQL注入等。
2. 枚举管理员用户名，尝试常见密码。
3. 测试HTTP头中的信息，如HTTP头允许跨站脚本（XSS），防止缓存信息等。
4. 尝试暴力密码破解，不断尝试登录直到获得正确的用户名和密码。
5. 尝试在登录表单中注入有效载荷，以绕过认证流程。
6. 检查并测试所有可用API，以确定是否存在任何漏洞。
7. 检查登录页面的SSL/TLS证书是否有效。
8. 尝试在登录页面访问特定的文件夹，以查看是否存在任何可以利用的权限问题。
9. 检查是否有明文存储用户名和密码。
10. 尝试通过擦除cookie、修改cookie和请求头信息等，让浏览器在登录表单中注入有效载荷。
```

### 简述请求头中哪些是有危害的?

```
恶意的HTTP头包括：

1、X-Forwarded-For：此头表示HTTP请求中客户端的IP地址。某些client看到此标头并将其发送到Web服务器，以弱化客户端安全性。
2、Cookie：Cookies是Web应用程序标识用户的唯一方法，如果攻击者可以篡改Cookie并将恶意值植入其中，它可能会导致未经授权的访问。
3、User-Agent：某些攻击者可能会改变此标头，以隐藏他们的硬件及操作系统的型号。
4、Referer：此标头跟踪用户来自哪里，恶意攻击者可能会使用此标头向用户发送恶意网站的链接。
```

### 简述什么是OAuth协议 ?

```
OAuth(开放授权)是一个开放标准。
允许第三方网站在用户授权的前提下访问在用户在服务商那里存储的各种信息。
而这种授权无需将用户提供用户名和密码提供给该第三方网站。
OAuth允许用户提供一个令牌给第三方网站，一个令牌对应一个特定的第三方网站，同时该令牌只能在特定的时间内访问特定的资源
```

### 简述OAuth的原理和授权流程 ？

```
OAuth的认证和授权的过程中涉及的三方包括：
服务商：用户使用服务的提供方，一般用来存消息、储照片、视频、联系人、文件等(比如Twitter、Sina微波等)。
用 户：服务商的用户
第三方：通常是网站，该网站想要访问用户存储在服务商那里的信息。
比如某个提供照片打印服务的网站，用户想在那里打印自己存在服务商那里的网络相册。
在认证过程之前，第三方需要先向服务商申请第三方服务的唯一标识。
OAuth认证和授权的过程如下:
1、用户访问第三方网站网站，想对用户存放在服务商的某些资源进行操作。
2、第三方网站向服务商请求一个临时令牌。
3、服务商验证第三方网站的身份后，授予一个临时令牌。
4、第三方网站获得临时令牌后，将用户导向至服务商的授权页面请求用户授权，然后这个过程中将临时令牌和第三方网站的返回地址发送给服务商。
5、用户在服务商的授权页面上输入自己的用户名和密码，授权第三方网站访问所相应的资源。
6、授权成功后，服务商将用户导向第三方网站的返回地址。
7、第三方网站根据临时令牌从服务商那里获取访问令牌。
8、服务商根据令牌和用户的授权情况授予第三方网站访问令牌。
9、第三方网站使用获取到的访问令牌访问存放在服务商的对应的用户资源。
```

### 解释Oauth认证过程中可能会出现什么问题，导致什么样的漏洞?

```
1. 认证过程中可能出现的漏洞包括：认证信息不正确、认证信息不安全、认证回调不可靠、对认证信息的滥用等。
2. 这些问题可能会导致攻击者窃取访问令牌，注入恶意请求，篡改网络数据，窃取用户的隐私信息等漏洞。
```

### 拥有CDN的网站如何获取真实IP ？

```
1. 添加通过X-Forwarded-For获取真实IP：如果您的CDN服务器可以设置X-Forwarded-For头部，我们可以在服务器端获取到客户真实IP地址。
2. 使用CDN API：某些CDN服务提供了API接口，可以直接通过API接口获取客户真实IP地址。
3. 通过HTTP头部获取真实IP：如果CDN服务器添加了HTTP头信息，您可以通过获取HTTP头信息获取客户的真实IP地址。
4. 使用Google开放的API：可以使用Google的开放的地理定位API，用客户的IP地址获得结果，可以轻松获取到客户的真实IP地址。
5. 使用第三方IP查询API：可以使用第三方的IP查询API获得客户的真实IP地址。
6. 直接检查HTTP请求数据包：在服务器端抓取HTTP请求数据的源IP地址，从而可以获得客户的真实IP地址。
7. 使用IPv6地址识别方法：对IPv6地址进行检测可以识别端用户的真实IP地址。
8. 通过防火墙日志获取真实IP：可以从防火墙日志中获取客户的真实IP地址。
9. 通过服务器日志获取真实IP：通过服务器日志也可以识别出客户的真实IP地址。
10. 使用NETGEAR ACE API获取真实IP：可以使用NETGEAR ACE API获取客户的真实IP地址。
```

### 叙述如何实现跨域?

```
跨域是指浏览器禁止从一个源加载来自另一个源的内容，这些内容可能是静态文件，如JavaScript和CSS，也可能是由服务器上的数据动态生成的。
1. 使用JSONP实现跨域: JSONP (JSON with Padding)在仅看html内容的时候，将另一个域加载到当前页面的一种技术，它允许跨域调用脚本文件，从而实现跨域的数据传输。
2. 使用CORS实现跨域: CORS（跨源资源共享/跨域资源共享）是一种用于实现跨源请求的技术，它使浏览器可以发送和接收跨源http请求，从而进行跨域数据传输。
3. 使用Nginx代理实现跨域: 使用Nginx代理是针对ajax发起的http请求，利用Nginx的反向代理的能力，将客户端向服务器端发起的请求，由Nginx服务器端转发到源服务器，客户端得到的返回值仍然是由Nginx服务器返回的，从而达到跨域的目的。
```

### 简述有哪些常见后门方式?

```
1. 后门程序：攻击者可以在系统中安装后门程序，以便获取系统的访问权限。
2. 后门账号：攻击者可以创建一个后门账号，以便获取系统的访问权限。
3. 后门服务：攻击者可以在系统中安装后门服务，以便获取系统的访问权限。
4. 后门端口：攻击者可以在系统中打开一个后门端口，以便获取系统的访问权限。
5. 后门文件：攻击者可以在系统中创建一个后门文件，以便获取系统的访问权限。
6. 后门网络：攻击者可以在系统中创建一个后门网络，以便获取系统的访问权限。
7. 后门脚本：攻击者可以在系统中创建一个后门脚本，以便获取系统的访问权限。
8. 后门程序替换：攻击者可以在系统中替换一个后门程序，以便获取系统的访问权限。
```

### 简述一下目前主流编程语言的相关漏洞 ？

```
这个题的相关思路就是聊一聊目前主流语言的漏洞，你可以从两个方面进行阐述：
Java 、Python、PHP（漏洞大户）的相关漏洞，其实也是那几个；
聊聊你知道的框架 - 比如Apache基金会框架、PHPAdmin、Python主流Web架构 - jinjia2、Django等；
**Python的漏洞：**
注入：Django 2022新的SQL注入漏洞，即使Django采用参数化查询和ORM的防范SQL注入也存在字典注入的方式，2022最新的CVE漏洞利用QuerySet.annotate()、aggregate()和extra()方法进行注入；
XML： XML的读取会造成DoS攻击；XXE 攻击的利用；
assert 语句： 不要使用 assert 语句来防止用户访问特定代码段。默认情况下，Python 以 debug 为 true 来执行脚本，但在真实环境中，通常使用优化运行，这将会跳过 assert 语句并直接转到安全代码，而不管用户是否是 is_admin 。
site-package： 伪造官方库进行代码注入和代码伪造；
**Java漏洞：**
Java最著名的就是反序列化漏洞，反序列化漏洞出现在WebLogic、JBoss等常见Web容器；
Structs2就是任意代码执行
Log4j2 也是很火的漏洞
Shiro 的身份验证绕过、远程代码执行；
**PHP漏洞：一抓一大把**
ThinlkPHP的远程代码执行
PHP的反序列化
ThinkPHP文件包含
PHP不安全函数： chroot、exec、一句话木马、proc_open等
```

### 简述如何发现系统正在遭受攻击？

```
首先，可以在现网中部署流量监视系统或者流量审计系统，从而对业务流量进行监视，进行业务正常流量和IP地址的追踪和观察，形成自身的业务流量安全相关模型，明确内网服务器或者自身应用系统对于服务流量的上限，设立相关的警戒阈值，超过该阈值需要考虑是否遭受DoS攻击；

利用分布式多核硬件技术，基于深度数据包检测技术（DPI）监测、分析网络流量数据，快速识别隐藏在背景流量中的攻击包，以实现精准的流量识别和清洗。恶意流量主要包括 DoS/DDoS 攻击、同步风暴(SYN Flood)、UDP 风暴(UDPFlood)、ICMP 风暴(ICMP Flood)、DNS 查询请求风暴（DNS Query Flood)、HTTP Get 风暴（HTTP Get Flood）、CC 攻击等网络攻击流量。

其次，Linux服务器对于CC攻击和DoS攻击有自身的日志记录，dmesg 和 message 日志都会有相关的Flood的日志记录，这个日志的记录是由于：
net.ipv4.tcp_max_syn_backlog 参数设置的，Linux也有其他参数来防止DoS攻击，主要思路是控制连接数；

net.ipv4.tcp_max_syn_backlog = 4096 ``#表示SYN队列的长度，加大队列长度可以容纳更多等待连接的网络连接数
net.ipv4.tcp_syncookies = 1 ``#表示开启SYN Cookies功能。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭，1表示打开；
net.ipv4.tcp_synack_retries = 2 ``#下面这两行表示定义SYN重试次数
net.ipv4.tcp_syn_retries = 2
#提高TCP连接能力
net.ipv4.tcp_rmem = 32768
net.ipv4.tcp_wmem = 32768
net.ipv4.tcp_sack = 0 ``#打开tcp_sack功能，1表示"关闭"，0表示"打开"
**DDoS deflate** 也是一个控制 netstat 和 iptables 有效的工具，通过 netstat 监测跟踪创建大量网络连接的IP地址，在检测到某个结点超过预设的限制时，该程序会通过APF或IPTABLES禁止或阻挡这些IP；

一些框架，例如Apache的Web框架就记录了：access log 来记录访问；

此外，可以检查Linux服务器的相关进程资源使用情况，通过 top命令查看监视系统进程的资源使用情况，对系统的资源使用进行监控，这里涉及到主机的监控的相关技术；或者通过 netstat 查看目前系统正在连接数；

**netstat -npt | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -n**

也可以直接抓取网络流量进行分析，使用的相关工具有：tcpdump 和 tshark 可以抓取网络流量进行分析
```

### 简述什么是企业的安全运营，安全运营的概念 ？

```
安全运营被定义为：以资产为核心、以安全事件管理为关键流程，采用安全域的划分思想，建立一套实时的资产风险模型，协助管理员进行事件分析、风险分析、预警管理和应急响应处理的集中安全管理系统；

安全运营以用户网络的最终安全为目的，实现运营过程上的统筹管理；

安全风险不仅仅指的是目前的互联网技术、计算机科学技术，而是将企业整个体系的安全囊括在安全运营建设上，包括：合规安全（监管机构、行业规范）、运营风险管理（在实际运营中的风所有险，例如金融行业的风险控制部门，涉及到业务、产品等）；

安全运营本质上就是一个：以技术、流程和人有机结合的复杂系统过程，包含：

> 产品、服务、运维、研发等，已有安全工具、安全服务产出的数据进行有效分析，持续输出价值，解决安全风险

其模式：用“服务模式”开展合作，以“安全能力”进行赋能，以“安全数据”提供决策，以“运营能力”作为交付，以运营模式来发现问题、验证问题、分析问题、响应处理、解决问题并持续优化；
```

### 简述HTTP 报头追踪漏洞 ？

```
HTTP/1.1（RFC2616）规范定义了 HTTP TRACE 方法，主要是用于客户端通过向 Web 服务器提交 TRACE 请求来进行测试或获得诊断信息。
当 Web 服务器启用 TRACE 时，提交的请求头会在服务器响应的内容（Body）中完整的返回，其中 HTTP 头很可能包括 Session Token、Cookies 或其它认证信息。攻击者可以利用此漏洞来欺骗合法用户并得到他们的私人信息。
```

### 简述ARP的概念和原理 ？

```
ARP全称是“Address Resolution Protocol”(地址解析协议)，ARP作用于以太网的环境之中，以太网环境之中数据的传输依赖的是MAC地址并不是我们所熟悉的IP地址，每个电脑都有一个IP地址记以及一个MAC地址（全球唯一），二者缺一不可，将我们所知道熟悉的IP地址转换为MAC地址就是ARP协议的工作

【原理】
1.Host1发送数据前设备会先查找自己的ARP缓存表，如果有直接封装到帧里进行发送,如ARP缓存表没有对应IP地址的MAC信息，则会通过ARP进行获取

2.Host1会发送ARP Request报文来请求获取Host2的MAC地址（因为帧内没有目的MAC地址是不可以进行传输的，所以ARP报文内的目的MAC地址为全F）

3.因为ARP Request目的MAC地址为 FF-FF-FF-FF-FF-FF（广播数据帧），所以交换机收到后会直接对该帧进行泛洪（广播）操作，并且学习该IP的MAC地址以及端口号到交换机自己的MAC缓存表

4.所有主机都接受到该ARP Request报文后，都会检查该帧的目的IP地址与自身的IP地址是否匹配，不匹配就直接丢弃，Host发现与自己IP地址匹配，就会先把发送端的IP与MAC地址信息记录到自己的ARP缓存表之中，然后Host2就会发送ARP Reply报文（因为刚才进行了学习所以知道Host1的MAC地址，所以ARP Reply是单播数据帧）来进行响应

5.交换机收到单播数据帧以后，会对该帧进行转发操作，并且学习Host2的MAC地址和端口号到自己的MAC缓存表

6.Host1收到Host2的ARP Reply报文后会检查目的IP与自己IP地址字段是否相同，如果匹配就将回应报文的源IP地址与MAC地址学习到自己的ARP缓存表之中，然后就可以传输信息进行通信
```

### 简述什么是ARP欺骗 ？

```
1. 什么是ARP欺骗？
在局域网中，黑客经过收到ARP Request广播包，能够偷听到其它节点的 (IP, MAC) 地址。例， 黑客收到两个主机A, B的地址，就伪装为A，告诉B (受害者) 一个假地址，使得B在发送给A 的数据包都被黑客截取，而A, B 浑然不知。

2. 为什么黑客能够进行ARP欺骗？
ARP 是个早期的网络协议，RFC826在 1980就出版了。那时互联网采用是信任模式，在科研、大学内部使用，要解决许多技术难题，追求功能、速度，没考虑网络安全。尤其以太网的洪泛特点，能够很方便的用来查询。但这也为日后的黑客开了方便之门。黑客只要在局域网内阅读送上门来的ARP Request就能偷听到网内所有的 (IP, MAC)地址。而节点收到ARP Reply时，也不会质疑。黑客很容易冒充他人。
```

### 简述怎么样防止 ARP 欺骗 ？

```
ARP 欺骗就是在网络中发送虚假的 ARP 应答，达到替换掉靶机 ARP 中 IP 地址和 MAC 地址的对应关系的目的。arp 欺骗分为主句欺骗和网关欺骗，不同的欺骗方式，防御方法不同：

对主机欺骗的方法：ARP 欺骗是通过重复应答实现的，那么只需要在本机添加一条静态的 ARP 映射，这样就不需要询问网关 MAC 地址了。

对于网关欺骗的方法：需要在网关中也添加一条到主机的静态 ARP 映射。

用管理身份运行命令提示符；输入 netsh i i show in，查看一下本机有哪些网络连接
netsh i i show in
查看一下网关的 MAC 地址。注意如果正遭受 ARP 欺骗攻击，通过此方法查处的可能是虚假的 MAC 地址。输入 arp -a 命令查询本机的 arp 映射表，如果找不到网关的信息，可以先 ping 一下网关

输入：netsh -c “i i” add neighbors 连接的 Idx 号 网关 IP 网关 MAC 添加一条静态映射，我已经添加过了，所以会显示对象已存在

netsh -c "i i" add neighbors 连接的Idx号 网关IP 网关MACnetsh -c "i i" add neighbors 9 10.60.12.1 4c-5e-0c-64-73-f5
```

### 简述什么是鱼叉式攻击和水坑攻击 ？

```
1、鱼叉攻击是指黑客通过伪装成一个可信来源的方式来欺骗特定目标，以获取敏感信息或者进行其他恶意活动的攻击方式。这种攻击通常是通过电子邮件或社交媒体等通信方式实施的，黑客会针对某个特定的人或组织，通过伪造信任的方式来引导受害者点击链接或者下载附件等，从而让受害者泄露出机密信息或者安装恶意软件。

2、是指黑客通过攻击受害者经常访问的网站，以获取敏感信息或者进行其他恶意活动的攻击方式。这种攻击通常是通过对目标网站进行攻击，使得访问该网站的用户受到感染或者被重定向到恶意网站，从而让黑客获得用户的敏感信息或者控制用户的计算机。

简讲：鱼叉式攻击是一种针对个人或组织的攻击，而水坑攻击则是一种针对广泛用户的攻击。
```

### 简述什么是虚拟机逃逸 ?

```
指攻击者利用虚拟化软件或操作系统中的漏洞，从虚拟机（VM）环境中获得对物理主机的控制权。攻击者可以通过虚拟机逃逸攻击，绕过安全措施，获取对整个物理主机的访问权限，并访问所有存储在其中的敏感数据。
```

### 简述什么是中间人攻击方式 ？

```
中间人攻击（Man-in-the-middle attack，缩写：MITM）在密码学和计算机安全领域中是指攻击者与通讯的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。在中间人攻击中，攻击者可以拦截通讯双方的通话并插入新的内容。在许多情况下这是很简单的（例如，在一个未加密的 Wi-Fi 无线接入点的接受范围内的中间人攻击者，可以将自己作为一个中间人插入这个网络）。

中间人攻击 Man-in-the-middle attack

一个中间人攻击能成功的前提条件是攻击者能将自己伪装成每一个参与会话的终端，并且不被其他终端识破。中间人攻击是一个（缺乏）相互认证的攻击。大多数的加密协议都专门加入了一些特殊的认证方法以阻止中间人攻击。例如，SSL 协议可以验证参与通讯的一方或双方使用的证书是否是由权威的受信任的数字证书认证机构颁发，并且能执行双向身份认证。

需要通过一个安全的通道做额外的传输

与连锁协议不同，所有能抵御中间人攻击的加密系统都需要通过一个安全通道来传输或交换一些额外的信息。为了满足不同安全通道的不同安全需求，许多密钥交换协议已经被研究了出来。
```

### 如何防御中间人攻击 ？

```
许多抵御中间人攻击的技术基于以下认证技术：

公钥基础建设
在 PKI 方案中，主要防御中间人攻击的方案就是 PKI 的相互认证的机制。使用这样的机制并由应用程序验证用户，用户设备验证应用程序。但在某些流氓应用的情况下，这不是很有用，所以需要注意对流氓软件应与正规软件进行区分。
更强力的相互认证，例如：
密钥（通常是高信息熵的密钥，从而更安全）
密码（通常是低的信息熵的密钥，从而降低安全性）
延迟测试，例如使用复杂加密哈希函数进行计算以造成数十秒的延迟；如果双方通常情况下都要花费 20 秒来计算，并且整个通讯花费了 60 秒计算才到达对方，这就能表明存在第三方中间人。
第二（安全的）通道的校验
一次性密码本可以对中间人攻击免疫，这是在对一次密码本的安全性和信任上创建的。公钥体系的完整性通常必须以某种方式得到保障，但不需要进行保密。密码和共享密钥有额外的保密需求。公钥可以由证书颁发机构验证，这些公钥通过安全的渠道（例如，随 Web 浏览器或操作系统安装）分发。公共密钥也可以经由 Web 在线信任进行在线验证，可以通过安全的途径分发公钥（例如，通过面对面的途径分发公钥）。
```

### 简述什么是Land攻击 ？

```
land 攻击是一种使用相同的源和目的主机和端口发送数据包到某台机器的攻击。当操作系统接收到这类数据包时，不知道该如何处理，或者循环发送和接收该数据包，这样会消耗大量的系统资源，从而有可能造成系统崩溃或死机。

在Land攻击中，一个特别打造的SYN包中的原地址和目标地址都被设置成某一个服务器地址，这时将导致接受服务器向它自己的地址发送SYN一ACK消息，结果这个地址又发回ACK消息并创建一个空连接，每一个这样的连接都将保留直到超时掉。对Land攻击反应不同，许多UNIX实现将崩溃，而 Windows NT 会变的极其缓慢（大约持续五分钟）。

防御方法：这类攻击的检测方法相对来说比较容易，因为可以直接通过判断网络数据包的源地址和目标地址是否相同确认是否属于攻击行为。反攻击的方法当然是适当地配置防火墙设备或制定包过滤路由器的包过滤规则，并对这种攻击进行审计，记录事件发生的时间、源主机和目标主机的MAC地址和IP地址，从而可以有效地分析并跟踪攻击者的来源。
```

### 简述什么是CRLF 注入攻击 ？

```
CRLF的含义是“carriage return/line feed”，意思就是回车和换行。这是两个ASCII字符，分别排在第十三和第十位。

CRLF指的是特殊字符元素“回车”和“换行”。这些元素嵌入在HTTP标头和其他软件代码中，以表示行尾（EOL）标记。许多互联网协议，包括MIME（电子邮件），NNTP（新闻组），更重要的是HTTP，使用CRLF序列将文本流分割为离散元素。Web应用程序开发人员根据CRLF所在的位置拆分HTTP和其他标头。当攻击者能够将CRLF序列注入HTTP流时，就会出现漏洞。通过引入这种意外的CRLF注入，攻击者能够恶意利用CRLF漏洞来操纵Web应用程序的功能。

CRLF注射的更正式名称是CRLF序列的不正确中和。因为CRLF注入经常用于分割HTTP响应，所以它也可以被指定为HTTP响应分裂或HTTP头中的CRLF序列的不正确中和。

CRLF 注入，从基本层面来说，是一种更强大的攻击方式。在意想不到的位置添加行末命令，攻击者可以注入代码进行破坏。根据 Veracode 的研究，这些破坏包括：网站篡改、跨站脚本攻击、浏览器劫持等。尽管这类攻击可能比其他攻击更容易防范，但若是忽视这一攻击，就会酿成大祸。
```

### 请简述什么是Webshell概念和检测思路?

```
一、webshell概述
Webshell客户端是一种连接Webshell后门，用于攻击者与服务器之间通信的程序。

二、Webshell流量监测思路
1、特征分析：分析流量特征中的关键特征，判断是否存在webshell流量特征；
2、请求模式：分析webshell流量的请求模式，可以通过分析URL，参数和头部信息来判断是否存在webshell流量；
3、检测内容：通过分析流量中的关键字等特征，判断是否存在webshell流量特征；
4、字符集：分析流量中的字符集是否webshell流量关联；
5、加密算法：分析流量中的加密算法，判断是否存在webshell流量特征；
6、文件上传：分析流量中是否存在文件上传性质等性质，判断是否存在webshell流量特征；
7、恶意脚本：分析流量中是否存在恶意脚本，判断是否存在webshell流量特征；
```

### 简述RIP协议是什么? RIP 的工作原理

```
RIP是一种基于距离向量的路由协议，用于在局域网或广域网中交换路由信息，并计算出最佳的路由路径。RIP是一种较为简单的路由协议，常用于小型网络环境。
RIP协议的工作原理：
1、RIP协议将整个网络分成若干个网络段，每个网络段有一个唯一的标识符，称为网络号。
2、每个路由器都会维护一个路由表，记录着到达不同网络的距离和下一跳路由器的信息。
3、路由器会周期性地向相邻路由器广播自己的路由表信息，让相邻路由器了解到自己的路由情况。
4、当一个路由器接收到相邻路由器的路由信息后，会将自己的路由表与之比较，如果相邻路由器提供了一条更短的路径，那么就更新自己的路由表，并将这条信息广播给相邻路由器。
5、路由器会不断地更新自己的路由表，直到所有路由信息都已经传播到网络中的每个路由器，并且网络中的所有路由表都一致。
```

### 简述什么是OSPF协议? OSPF的工作原理

```
OSPF是一种路由协议用于在一个单一自治系统（AS）中实现最短路径优先（Shortest Path First，SPF）算法，以决定数据包的传输路径。
OSPF协议的工作原理:
1、邻居发现：OSPF协议在邻居发现阶段，通过发送和接收Hello消息来确认邻居关系。如果两个路由器之间建立了邻居关系，它们将开始交换路由信息。
2、链路状态数据库同步：每个OSPF路由器将它们的链路状态信息存储在一个本地的链路状态数据库（Link State Database，LSDB）中。当两个邻居路由器建立邻居关系后，它们将交换各自的链路状态信息，并将其存储在本地的LSDB中。此时，每个路由器都会尝试同步它们的LSDB。
3、SPF计算：在每个路由器都有完整的LSDB后，它们将使用SPF算法来计算最短路径树（Shortest Path Tree），并将其存储在路由表中。最短路径树是指从某个路由器出发到其他所有路由器的最短路径。
4、路由更新：每个路由器都会定期发送更新消息来通知其它路由器它们的链路状态发生了变化。当一个路由器收到一个更新消息时，它会更新自己的LSDB，并重新计算最短路径树。
5、数据传输：当数据包到达一个路由器时，该路由器将使用最短路径树来确定下一个路由器，并将数据包转发到该路由器。
```

### 简述XSS除了获取cookies还能做什么劫持操作 ?

```
XSS可以用来做的其他事情有：
1. 劫持用户会话：通过XSS攻击，攻击者可以访问受害者的用户会话，从而获取用户的登录凭据或其他敏感信息。
2. 修改网页内容：XSS攻击可以用来修改网页内容，从而欺骗受害者。
3. 破坏网站结构：XSS攻击可以用来破坏网站结构，从而影响网站的正常运行。
4. 获取用户数据：XSS攻击可以用来获取用户的敏感信息，比如用户的个人信息、财务信息等。
5. 执行恶意脚本：XSS攻击可以用来执行恶意脚本，从而对网站进行攻击或进行其他恶意活动。
6. 传播蠕虫：XSS攻击可以用来传播蠕虫，从而在受害者网络中传播恶意程序。
7. 劫持浏览器：XSS攻击可以用来劫持浏览器，从而控制用户的浏览习惯。
8. 弹出恶意广告：XSS攻击可以用来弹出恶意广告，从而影响用户的正常使用。
9. 注入恶意代码：XSS攻击可以用来注入恶意代码，从而影响网站的正常运行。
10. 操纵搜索结果：XSS攻击可以用来操纵搜索结果，从而让受害者访问攻击者想要让他们访问的网站。
11. 传播木马程序：XSS攻击可以用来传播木马程序，从而攻击网站或窃取用户信息。
12. 劫持网站：XSS攻击可以用来劫持网站，从而控制网站的内容和功能。
```

### 简述什么是缓冲区溢出原理 ？

```
想了解缓冲区溢出攻击，首先就要了解什么是缓冲区和缓冲区溢出。缓冲区是一块连续的计算机内存区域，可保存相同数据类型的多个实例。缓冲区可以是堆栈(自动变量)、堆(动态内存)和静态数据区(全局或静态)。在C/C++语言中，通常使用字符数组和堆中动态分配的内存（也称为“malloc”或“new”区域）之类内存分配函数实现缓冲区。

操作系统所使用的缓冲区又被称为堆栈，在各个操作进程之间，指令被临时存储在堆栈当中，堆栈也会出现缓冲区溢出。理想情况是，程序检查数据长度并且不允许输入超过缓冲区长度的字符串。但是绝大多数程序都会假设数据长度总是与所分配的存储空间相匹配，这就为缓冲区溢出埋下隐患。当一个超长的数据进入到缓冲区时，超出部分就会被写入其他缓冲区，其他缓冲区存放的可能是数据、下一条指令的指针，或者是其他程序的输出内容，这些内容都被覆盖或者破坏掉。可见一小部分数据或者一套指令的溢出就可能导致一个程序或者操作系统崩溃。


【缓冲区溢出攻击原理】
缓冲区溢出的一个致命的使用就是让程序执行它本来不愿意执行的函数。这是一种常见的通过计算机网络攻击系统安全的方法。通常，输入给程序一个字符串，这个字符串包含一些可执行代码的字节编码，成为攻击代码。另外，还有一些字节会用一个指向攻击代码的指针覆盖返回地址。那么，执行ret指令的效果就是跳转到攻击代码。

攻击者可以故意将精心制作的输入馈入程序，程序将尝试将该输入存储在不够大的缓冲区中，因此输入会覆盖连接到缓冲区空间的部分内存。如果程序的内存布局定义明确，则攻击者可以故意覆盖已知包含可执行代码的区域。然后，攻击者可以用自己的可执行代码替换这些代码，这可以大大改变程序的工作方式。

缓冲区溢出漏洞攻击都是在寻求改变程序的执行流程，使它跳转到攻击代码，最为基本的就是溢出一个没有检查或者其他漏洞的缓冲区，这样做就会扰乱程序的正常执行次序。通过溢出某缓冲区，可以改写相近程序的空间而直接跳转过系统对身份的验证。原则上来讲攻击时所针对的缓冲区溢出的程序空间可为任意空间。
```

### 简述缓冲区溢出攻击的防范方式 ？

```
1 强制写正确的代码的方法
编写正确的代码是一件非常有意义但耗时的工作，特别像编写C语言那种具有容易出错倾向的程序（如：字符串的零结尾），这种风格是由于追求性能而忽视正确性的传统引起的。尽管花了很长的时间使得人们知道了如何编写安全的程序，具有安全漏洞的程序依旧出现。因此人们开发了一些工具和技术来帮助经验不足的程序员编写安全正确的程序。虽然这些工具帮助程序员开发更安全的程序，但是由于C语言的特点，这些工具不可能找出所有的缓冲区溢出漏洞。所以，侦错技术只能用来减少缓冲区溢出的可能，并不能完全地消除它的存在。除非程序员能保证他的程序万无一失，否则还是要用到以下部分的内容来保证程序的可靠性能。

2 栈随机化
使得栈的位置在程序每次运行时都有变化（主要受linux系统版本限制，老版本不支持栈随机化）。为了在系统插入攻击代码，攻击者不但要插入代码，还需要插入指向这段代码的指针（指向攻击代码的首地址/栈地址），这个指针也是攻击字符串的一部分。产生这个指针需要知道这个字符串放置的栈地址。老的系统版本，如果在相同的系统运行相同的程序，栈的位置是相当固定的。所以黑客可以在一台机器上研究透系统上的栈是如何分配地址的，就可以入侵其它主机。

实现的方式：程序开始时，在栈上分配一段0~n字节之间的随机大小的空间。分配的范围n必须足够大，才能获得足够多样的栈地址变化，但是又要足够小，不至于浪费程序太多的空间。

3 栈破坏检测
检测到何时栈被破坏（主要受GCC版本的限制，老的GCC版本不支持栈破坏检测）。从strcpy等函数我们可以看到，破坏通常发生在当超越局部缓冲区的边界时。在C语言中，没有可靠的方法来防止对数组的越界写。但是，我们能够在发生了越界写的时候，并且，在其还没有造成任何有害结果之前，尝试检测到它，并且把程序终止。

实现的方式：加入一种栈保护机制。 在栈帧中，紧接着局部缓冲区的位置放置一个哨兵（金丝雀），哨兵值是随机产生的，攻击者没有简单的方法能够知道它是什么。在恢复寄存器状态和函数返回之 前，程序检查这个金丝雀的值是否发生改变，如果发生改变立即终止程序。

4 限制可执行代码区域
消除攻击者向系统插入可执行代码的能力，一种方法是：限制那些能够存放可执行代码的存储器区域。在典型的系统中，只有保存编译器产生的代码的那部分存储器才需要是可执行的，其它部分可以被限制为只允许读和写。

一般的系统允许三种访问的形式：读（从存储器读数据）、写（存储数据到存储器）和执行（将存储器的内容看作是机器级代码）。以前，x86体系结构将读和执行访问控制合并为1位的标志，这样任何被标记为可读的页都是可执行的。栈又要求必须是既可以读又可以写的，所以x86体系结构栈上的字节都是可执行的。也有一些体制，能够限制一些页是可读但是不可执行，但是这些体制一般都会带来严重的性能损失。

实现的方式：AMD为它的64位存储器的内容保护引入了“NX”（No-eXecute，不执行）位，将读和执行访问模式分开，intel也跟进了。从这开始，栈可以被标记为可读、可写，但是不可执行。检查页是否可执行由硬件来完成，效率上没有损失。
```

### 简述水平/垂直/未授权越权访问的区别?

```
水平越权访问指的是当一名用户尝试访问另一名用户或资源，但其等级不比他以上，因此无法实现。水平越权对于维护安全性是非常重要的，用户只能访问自己的内容，而不能访问另一个用户的内容。

垂直越权访问是指一个用户经过授权可以获得更高一级的权限，即不允许访问更高级别，但是允许访问更高层级的权限。例如，一个可以查看某个网站的文章，但可以添加和修改文章的用户，他就经过了垂直越权访问。

未授权越权访问指的是一个用户尝试访问另一个未经授权的用户或资源，这是一种非法的行为，一旦发现便立即拒绝该访问。未授权的越权行为可能会破坏系统完整性，或者丢失私人数据，因此这是一个非常严重的问题
```

### 简述reverse tcp和 bind tcp的区别?

```
TCP建立连接时有两种方式：Reverse TCP和Bind TCP。

Reverse TCP是客户端服务器之间“相反”的连接，因为客户端将尝试连接服务器，然后服务器返回一个确认连接。这是最常见的传输控制协议（TCP）连接模型，比如客户端浏览器和服务器之间的HTTP连接。

Bind TCP是服务器等待客户端的连接，服务器主动发出“绑定”请求，然后等待客户端响应，如果客户端响应，连接建立成功。这是客户端登录FTP服务器时使用的模型，即服务器监听某个端口并等待客户端接入。
```

### 简述Jsonp跨域与CORS跨域的区别?

```
1. JSONP是一种可以解决跨域问题的脚本，可以在不支持CORS的浏览器中使用，而CORS则是一种机制，它允许浏览器将一个在一个域名中的资源发送到另一个域名。
2. JSONP不是传统意义上的Ajax请求，而CORS是传统意义上的Ajax请求。
3. JSONP跨域的过程由浏览器来发起，而CORS 跨域过程由服务器来发起。
4. JSONP有自己的script标签和callback函数，而CORS是基于HTTP头信息来进行跨域操作的。
5. JSONP只支持get请求，而CORS支持所有类型的HTTP请求。
```

### 简述什么是SSRF漏洞攻击 ?

```
SSRF（Server-Side Request Forgery）服务端请求为伪造，SSRF是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。
一般情况下，SSRF攻击的目标是从外网无法访问的内部系统。（正是因为它是由服务端发起的，所以它能够请求到与它相连而与外网隔离的内部系统）
SSRF漏洞形成的原因大多是因为服务端提供了从其他服务器应用获取数据的功能且没有对目标地址作过滤和限制。

一、SSRF漏洞攻击利用
1、可以对外网、服务器所在内网、本地进行端口扫描，获取一些服务的 banner 信息；
2、攻击运行在内网或本地的应用程序（比如溢出）；
3、对内网Web应用进行指纹识别，通过访问默认文件实现；
4、攻击内外网的web应用，主要是使用get参数就可以实现的攻击；
5、利用 file 协议读取本地文件等；
二、SSRF漏洞发现及挖掘
能够对外发起网络请求的地方，就可能存在 SSRF 漏洞
从远程服务器请求资源（Upload from URL，Import & Export RSS Feed）
数据库内置功能（Oracle、MongoDB、MSSQL、Postgres、CouchDB）
Webmail 收取其他邮箱邮件（POP3、IMAP、SMTP）
文件处理、编码处理、属性信息处理（ffmpeg、ImageMagic、DOCX、PDF、XML）
1、分享：通过URL地址分享网页内容
2、转码服务
3、在线翻译
4、图片加载与下载：通过URL地址加载或下载图片
5、图片、文章收藏功能
6、未公开的Api实现以及其它调用URL的功能
7、从URL关键字中寻找
share
wap
url
link
src
source
target
u
3g
display
sourceURL
imageURl
domain
三、SSRF常用的后端实现
1、file_get_contents()
这段代码使用 file_get_contents 函数从用户指定的 URL 获取图片。然后把它用一个随机文件名保存在硬盘上，并展示给用户。
if (isset($_POST['url'])) {
$content = file_get_contents($_POST['url']);
$filename ='./images/'.rand().';img1.jpg';
file_put_contents($filename, $content);
echo $_POST['url'];
$img = "";
}
echo $img;
?>
2、fsockopen()
这段代码使用 fsockopen 函数实现获取用户制定 URL 的数据（文件或者 HTML）。这个函数会使用 socket 跟服务器建立 TCP 连接，传输原始数据。
function GetFile($host,$port,$link) {
$fp = fsockopen($host, intval($port), $errno, $errstr, 30);
if (!$fp) {
echo "$errstr (error number $errno) \n";
} else {
$out = "GET $link HTTP/1.1\r\n";
$out .= "Host: $host\r\n";
$out .= "Connection: Close\r\n\r\n";
$out .= "\r\n";
fwrite($fp, $out);
$contents='';
while (!feof($fp)) {
$contents.= fgets($fp, 1024);
}
fclose($fp);
return $contents;
}
}
?>
3、curl_exec()
使用 curl 获取数据。
if (isset($_POST['url'])) {
$link = $_POST['url'];
$curlobj = curl_init();
curl_setopt($curlobj, CURLOPT_POST, 0);
curl_setopt($curlobj,CURLOPT_URL,$link);
curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);
$result=curl_exec($curlobj);
curl_close($curlobj);
$filename = './curled/'.rand().'.txt';
file_put_contents($filename, $result);
echo $result;
}
?>
四、利用 SSRF 进行端口扫描
127.0.0.1:3306
根据服务器的返回信息进行判断，大部分应用不会判别端口，可通过返回的 banner 信息判断端口状态。
PHP后端代码：
if (isset($_POST['url'])) {
$link = $_POST['url'];
$filename = './curled/'.rand().'txt';
$curlobj = curl_init($link);
$fp = fopen($filename,"w");
curl_setopt($curlobj, CURLOPT_FILE, $fp);
curl_setopt($curlobj, CURLOPT_HEADER, 0);
curl_exec($curlobj);
curl_close($curlobj);
fclose($fp);
$fp = fopen($filename,"r");
$result = fread($fp, filesize($filename));
fclose($fp);
echo $result;
}
?>
html前端代码：









请求非 HTTP 的端口可以返回 banner 信息。或可利用 302 跳转绕过 HTTP 协议的限制。
辅助脚本
$ip = $_GET['ip'];
$port = $_GET['port'];
$scheme = $_GET['s'];
$data = $_GET['data'];
header("Location: $scheme://$ip:$port/$data");
?>
五、SSRF绕过姿势
1、更改 IP 地址写法，例如：192.168.0.1
8 进制格式：0300.0250.0.1
16 进制格式：0xC0.0xA8.0.1
10 进制整数格式：3232235521
16 进制整数格式：0xC0A80001
还有一种特殊的省略模式，例如10.0.0.1这个 IP 可以写成10.1
2、利用 URL 解析问题 在某些情况下，后端程序可能会对访问的 URL 进行解析，对解析出来的 host 地址进行过滤。这时候可能会出现对 URL 参数解析不当，导致可以绕过过滤。 例如：
http://www.baidu.com@192.168.0.1/与http://192.168.0.1请求的都是192.168.0.1内容
可以指向任意 ip 的域名xip.io：http://127.0.0.1.xip.io/==>http://127.0.0.1/
短地址http://dwz.cn/11SMa==>http://127.0.0.1
利用句号。：127。0。0。1==>127.0.0.1
利用 Enclosed alphanumerics
六、SSRF防御
服务器开启 OpenSSL 无法进行交互利用
服务端需要鉴权（Cookies & User：Pass）不能完美利用
限制请求的端口为 http 常用的端口，比如，80,443,8080,8090。
禁用不需要的协议。仅仅允许 http 和 https 请求。可以防止类似于 file:///,gopher://,ftp:// 等引起的问题。
统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态。
七、SSRF漏洞应用攻击模拟演示
漏洞场景
A：本机 192.168.1.100 存 在ssrf漏洞 内网网站服务器
B：本机内网 192.1681.105 存在HFS服务 单独内网
C：外网 192.168.232.128 攻击主机 模拟外网
环境介绍
由于网络环境限制，C无法直接连接B，C利用A的ssrf漏洞探针到B的IP及存在HFS漏洞，攻击成功后可以利用反弹使C其能正常连接B，进而取得控制权！
1、利用ssr探针内网情况
2、探针到B存在HFS
3、利用HFS漏洞攻击(可参考其他漏洞篇专题课程)
4、攻击变异 反弹 shell 取得权限
```

### 简述open basedir访问目录限制绕过方法?

```
1. 利用open_basedir的绝对路径：攻击者可以利用open_basedir的绝对路径来绕过open_basedir的限制，从而访问系统上的其他目录。

2. 利用open_basedir的相对路径：攻击者可以利用open_basedir的相对路径来绕过open_basedir的限制，从而访问系统上的其他目录。

3. 利用open_basedir的路径穿越：攻击者可以利用open_basedir的路径穿越来绕过open_basedir的限制，从而访问系统上的其他目录。

4. 利用open_basedir的路径枚举：攻击者可以利用open_basedir的路径枚举来绕过open_basedir的限制，从而访问系统上的其他目录。

5. 利用open_basedir的路径替换：攻击者可以利用open_basedir的路径替换来绕过open_basedir的限制，从而访问系统上的其他目录。
```

### 简述Redis未授权常见getshell的几种方式?

```
1. 利用Redis未授权访问漏洞，通过写入webshell的方式获取远程控制；
2. 将webshell文件上传到Redis服务器，然后在Redis中读取文件内容；
3. 利用Redis未授权访问漏洞，通过在Redis服务器执行任意命令，获取远程控制；
4. 利用Redis未授权访问漏洞，通过将木马文件作为字符串存入Redis，然后在Redis中调用木马，获取远程控制。
5. 如果Redis启用了RDB模式备份功能，可以将webshell文件隐藏在备份文件中，然后在Redis中读取文件内容；
6. 如果Redis启用了AOF模式持久化功能，可以将webshell文件作为执行命令写入AOF文件，然后在Redis中读取文件内容；
7. 如果Redis启用了主从结构，可以将webshell文件作为数据传输到从库，然后在Redis中读取文件内容。
8. 如果Redis开放了允许客户端执行脚本，可以将webshell文件作为脚本传输到Redis，然后在Redis中执行脚本，获取远程控制。
9. 利用Redis消息队列功能，将webshell文件作为消息发送到Redis，然后在Redis中读取文件内容。
10. 如果Redis开放了允许客户端使用EVAL命令，可以将webshell文件作为LUA脚本发送到Redis，执行脚本获取远程控制
```

### 简述JWT原理及常见攻击方式 ？

```
什么是JWT：

JSON 网络令牌 (JWT) 是一种标准化格式，用于在系统之间发送加密签名的 JSON 数据。它们理论上可以包含任何类型的数据，但最常用于发送有关用户的信息（“声明”），作为身份验证、会话处理和访问控制机制的一部分。与经典会话令牌不同，服务器需要的所有数据都存储在 JWT 本身的客户端。这使得 JWT 成为高度分布式网站的热门选择，用户需要与多个后端服务器无缝交互。

简单理解JWT的本质就是：把用户信息通过加密后生成的一个字符串。

HEADER：令牌头部，记录了整个令牌的类型和签名算法
PAYLOAD：令牌负荷，记录了保存的主体信息，比如你要保存的用户信息就可以放到这里,可以减少数据库的访问。
Signature【签名】：就是把header + payload + 密匙进行加密以后的密文数据。(传递数据的时候,header,payload也会进行加密,而签名就是在前面的加密基础之上再次进行加密)
JWT认证流程：

当客户端提交POST表单后，在后端验证完成时会生成一个JWT，接下来服务端会返回JWT至客户端，在随后的请求中都会带上JWT，即可工作。

JWT特点分析：

JWT最大的缺点是服务器不会保存会话状态，所以在使用期间不可能取消令牌或更改令牌的权限，一旦JWT签发，在有效期内会一直生效。
JWT不仅仅可用于认证，还可以用来信息交换，善用JWT有助于减少服务器请求数据库的次数。
JWT本身包含 认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限。
JWT攻击影响：

JWT攻击影响通常很严重，如果攻击者能够创建自己的具有任意值的有效令牌，则他们能够提升自己的权限或冒充其他用户，从而完全控制该账户。

【JWT攻击】
JWT识别
根据上述特征识别，或在burp中使用正则匹配查找
eyJ[A-Za-z0-9_-]*\.[A-Za-z0-9._-]*

.攻击思路
首先找到需要JWT鉴权后才能访问的页面，如个人资料页面，将该请求包重放测试：
1）未授权访问：删除Token后仍然可以正常响应对应页面
2）敏感信息泄露：通过JWt.io解密出Payload后查看其中是否包含敏感信息，如弱加密的密码等
3）破解密钥+越权访问：通过JWT.io解密出Payload部分内容，通过空加密算法或密钥爆破等方式实现重新签发Token并修改Payload部分内容，重放请求包，观察响应包是否能够越权查看其他用户资料
4）检查Token时效性：解密查看payload中是否有exp字段键值对（Token过期时间），等待过期时间后再次使用该Token发送请求，若正常响应则存在Token不过期
5）通过页面回显进行探测：如修改Payload中键值对后页面报错信息是否存在注入，payload中kid字段的目录遍历问题与sql注入问题
```

### JAVA中间件漏洞举几个例子？

```
1、Apache Tomcat Cipher Transformation Connection 配置不当漏洞（CVE-2015-5351）
2、Apache Tomcat 反射性文件上传漏洞（CVE-2017-12615）
3、Apache Tomcat HttpOnly标记缺失漏洞（CVE-2008-5515）
4、Apache ActiveMQ 反射性命令执行漏洞（CVE-2015-1830）
5、Apache Struts2 无效转义漏洞（CVE-2016-3087）
6、Apache HTTP Server 协议处理不当漏洞（CVE-2016-8743）
7、IBM WebSphere Application Server LDAP注入漏洞（CVE-2016-9458）
8、IBM WebSphere Application Server XFF头信息泄露漏洞（CVE-2015-2080）
9、IBM WebSphere Application Server 参数注入漏洞（CVE-2017-1393）
10、Oracle WebLogic Server 弱口令漏洞（CVE-2018-2628）
```

### DNS外带可以用在哪些漏洞?

```
1、SQL注入：使用DNS外带，攻击者可以读取受保护的服务器上的数据库文件，从而检索有意义的信息。
2、跨站脚本攻击：攻击者可以利用DNS外带，在受害者的浏览器端安装恶意脚本来获得帐号信息。
3、XML外部实体攻击：通过DNS外带，攻击者可以对受害者的系统进行恶意代码注入，从而让攻击者获得更多权限。
4、DNS欺骗/劫持：通过利用DNS外带，攻击者可以劫持目标系统的DNS解析，将请求重定向到恶意服务器。
5、XSS攻击：攻击者可以利用DNS外带，将恶意的脚本注入到目标网站中，实施XSS攻击。
6、拒绝服务攻击：攻击者可以利用DNS外带来进行拒绝服务攻击，从而对目标系统造成压力。
```

### 请简述常见中间件漏洞总结?

```
1. 路由器及路由器Web管理界面弱口令漏洞：攻击者可通过暴力破解路由器的web管理接口登录密码，窃取路由器的敏感信息；
2. 系统口令管理漏洞：系统管理员使用默认口令、易猜测口令，使攻击者可以更容易获取系统敏感信息；
3. 中间件配置不当漏洞：系统管理员可能会将一些敏感信息，如接口配置、接口请求和传输加密等，配置不当，导致攻击者可以接触到这些敏感信息；
4. 中间件远程服务漏洞：系统管理员可能已开放远程服务，攻击者可以攻击服务，进行暴力破解等；
5. 中间件反序列化漏洞：在处理反序列化数据时，可能会忽略许多校验步骤，导致攻击者可以构造出恶意的代码；
6. 中间件XML外部实体攻击漏洞：攻击者可以利用XML外部实体攻击，通过XML解析器对敏感信息进行访问；
7. 中间件在线应用漏洞：攻击者可能会攻击在线应用，窃取中间件相关敏感信息；
8. 访问控制不当漏洞：管理员可能会忽略对资源访问的限制，导致攻击者可以访问系统敏感信息；
9. 中间件不安全编码漏洞：管理员可能会忽略将敏感信息进行加密，导致攻击者可以接触到系统敏感信息；
10. 中间件调试漏洞：系统管理员可能会不当启用系统调试功能，导致攻击者获取中间件系统信息；
```

### 简述小程序的渗透和普通渗透的差异 ？

```
1. 小程序渗透的特点是以应用层渗透为主，包括接口安全检测、登录验证、权限控制等，而普通渗透需要依托系统架构，从底层协议层渗透，包括端口拦截、补丁攻击、Web安全检测、数据库审计等。
2. 小程序渗透的目的是检测小程序的安全漏洞，以及检测小程序的安全性，而普通渗透的目的是检测系统的安全漏洞，检测系统的行为审计，并检测系统的安全性。
3. 小程序渗透技术更专注于在应用层进行安全检测，而普通渗透技术主要集中于网络层及以上层的安全检测。
```

### 简述IDS/IPS防护原理及绕过思路 ？

```
IDS/IPS防护主要采用常见的静态检测（静态分析）、动态检测和行为分析相结合的方式进行防护。
静态检测，关注的是恶意行为的特征，如标识性特征、连接特征、结构特征等，通过分析数据包，确认是否存在特定病毒特征，从而检测出病毒攻击。
动态检测，通过模拟系统环境或模拟病毒运行，观察病毒是否具有攻击性行为，从而判断病毒的攻击性。
行为分析，通过对网络行为的特征分析，判断是否存在攻击行为，从而判断是否存在病毒攻击。
绕过IDS/IPS防护的方式：
1. 网络伪装：利用攻击者系统周围的流量作为网络基础设施，改变源地址或目的地址，以此为手段，绕过IDS/IPS系统；
2. 增加数据包长度：攻击者可以利用增大数据包长度，将数据分片后传输，其中恶意数据包可以隐藏在其他数据包中，从而绕过IDS/IPS系统的检测；
3. 使用特殊字符：攻击者可以使用特殊字符，将恶意数据包制作成不常见的特征，以此为手段，绕过IDS/IPS系统；
4. 加密传输：攻击者可以利用加密传输，使恶意数据包在传输过程中不会被IDS/IPS系统识别出特征，从而绕过检测和阻断
```

### 简述什么是csrf json 利用方式 ？

```
CSRF（Cross-Site Request Forgery）攻击是一种利用用户在浏览器中已登录的身份，通过伪造用户请求发送恶意请求的攻击。而JSON（JavaScript Object Notation）则是一种轻量级的数据交换格式，通常用于前后端数据传输。

攻击者可以通过伪造用户请求，成功地完成一些危害性操作，比如更改用户密码、转账等操作。但是，如果服务器端使用了 csrf token 来进行防范，则可以避免这种攻击。

然而，如果服务端使用 JSON 方式进行数据传输，则攻击者可以利用 JSONP（JSON with Padding）漏洞来进行攻击。简单来说，攻击者可以通过伪造JSONP请求，将攻击代码注入到 JSON 数据中，从而达到攻击服务器的目的。

//攻击者伪造的JSONP请求

在这个例子中，攻击者伪造了一个 JSONP 请求，请求 http://www.victim.com/get_user_info 并指定回调函数为 attack。攻击者的真实意图是在这个 JSON 数据中注入攻击代码，当服务器返回数据并执行回调函数 attack 时，攻击代码就会被执行。

为了防范这种攻击，服务端需要对 JSONP 请求进行过滤或者禁用，同时还需配合使用 csrf token 进行防范。前端也可以在请求发送前对JSONP请求进行特殊处理来避免这种攻击。
```

### 简述你了解蚁剑冰蝎哥斯拉吗？

```
讲原理蚂蚁剑、冰蝎、哥斯拉都是常见的远程管理工具。它们的原理相似，都是通过在受害主机上部署后门程序进行远程控制攻击。其中蚂蚁剑是基于Java开发的跨平台远程管理工具，可以通过HTTP/HTTPS协议与被控端进行通信。其原理是在Web服务器中注入一个类似于WebsheII的脚本，然后在客户端通过HTTP/HTTPS协议与注入的脚本通信，从而实现对被攻击端的远程控制。Ice Scorpion是一种常见的远程控制工具，主要通过Java Web服务器实现。攻击者首先在受害机器上植入后门，然后将后门连接到攻击者自己的服务器上，这样就可以通过Java Web服务器进行远程控制。哥斯拉也是一款常见的远程管理工具，其原理与蚁剑冰蝎类似。攻击者通过漏洞入侵或社会工程学等方式在受害者主机上部署后门程序，然后通过远程控制工具进行攻击。总的来说，这些远程管理工具的原理都是在被控端部署后门程序，然后在攻击者的控制下进行远程控制，从而实现对受害者机器的完全控制。因此，要防范此类攻击，需要加强修复系统漏洞、加强密码管理、加强入侵检测等安全措施。
```


### 简述TLS的加密过程 ？

```
首先必须明确，TLS目前的版本已经从1.0到1.3版本，目前比较流行的版本是1.2，TLS的运作的OSI模型在传输层，SSL/TLS综合运用了密码学中的对称密码，消息认证码，公钥密码，数字签名，伪随机数生成器等，可以说是密码学中的集大成者。
**握手协议；**
握手协议负责在客户端和服务器端商定密码算法和共享密钥，包括证书认证，是4个协议中最最复杂的部分。
**密码规格变更协议；**
密码规格变更协议负责向通信对象传达变更密码方式的信号
**警告协议；**
警告协议负责在发生错误的时候将错误传达给对方
**应用数据协议；**
应用数据协议负责将TLS承载的应用数据传达给通信对象的协议。
**TLS记录协议；**

TLS加密原理
- TCP建立了两端的连接；建立在TCP连接的基础上，TLS也是通过几次握手来保证应用层的数据安全传输；
- 要保证数据的安全，就要对两端的传输的报文进行加密，且要防止被中间人攻击所破解。
- TLS使用非对称加密的方式进行加密，当然这种加密的方式带来的问题就是：非常耗时，加密传输数据会影响效率，这一点非常关键；
- TLS的秘钥交换规则是：
> 服务端生成非对称秘钥对，私钥自己保存，将公钥明文传输给客户端；
> 客户端自己生成一个对称秘钥，再将对称秘钥通过公钥加密，通过加密后的秘钥传给服务端，服务端通过自己保存的私钥进行解密，获得客户端指定的对称秘钥；
> 当前，这种交换密钥的方式也有一个问题，就是明文传输的公钥可能存在被篡改的问题，这个时候必须引出数字证书和CA的概念；
- TLS的CA和数字证书（一定要回答这个方面的问题）：
> 数字证书是一个包含了某个服务站点名字、公钥的文件，该文件由CA颁发，能够证明服务站点的真实性。
> 服务端自己向CA证书申请数字证书，而CA机构怎么获得相关信任呢？这个时候涉及到根证书机构，世界上的根证书机构只有几个，因此CA机构向根CA机构进行申请，整个CA的信任链也是一个逐级链式认证的过程，在这里不再进行详述。
- TLS使用的加密协议：
TLS_DHE_DSS_WITH_AES_256_CBC_SHA256"
DHE-DSS-AES256-SHA256
TLS_DHE_DSS_AES_256_CBC_SHA256
1. 第一步： 客户端确定随机数，发送支持的密码算法放进到TLS协议中，供服务端进行选择；服务端存储客户端发送的随机数1；
2. 第二步：服务端确定与客户端的加密算法，并确定一个随机数2，以明文的方式发送给客户端，客户端保存随机数2；
3. 第三部：服务端发送数字证书（包括：公钥、签名、服务端主体信息）给服务端，此时服务器也确定了对应公钥的解密私钥；客户端收到后验证数字证书是否有效，并确定随机数3；
4. 第四步：客户端发送经过公钥加密的随机数3，服务端接收并使用保存的私钥进行解密；
5. 第五步：这下服务端和客户端都有了对称密钥生成的三个随机数：随机数1、随机数2、随机数3，使用DH（现在比较流行的是：ECDH算法）秘钥生成算法进行生成对称秘钥，使用对称秘钥进行加密数据进行传输；
```

### 如何提升非对称加密的运行效率 ？

```
可以采用独立的硬件加密模块的方式进行，非对称对称加密使用的算法需要考虑大数乘法、大因数分解、大数模运算，在计算机中简单的是加法和减法，因此乘法本身就是有损耗；其次，算法对于秘钥的存储需要空间和算法的复杂度，也会影响非对称加密的运行效率；

使用量子计算和椭圆曲线算法来进行加密的方式，椭圆曲线算法涉及到几何学，因此比大数乘法、大因数分解、大数模运算的复杂度要较低；
```

### 简述什么点击劫持攻击 ？

```
“点击劫持”攻击允许恶意页面 以用户的名义 点击“受害网站”。

许多网站都被黑客以这种方式攻击过，包括 Twitter、Facebook 和 Paypal 等许多网站。当然，它们都已经被修复了。

原理
访问者被恶意页面吸引。怎样吸引的不重要。
页面上有一个看起来无害的链接（例如：“变得富有”或者“点我，超好玩！”）。
恶意页面在该链接上方放置了一个透明的 
```

### 简述点击劫持攻击的有效防御措施 ？

```
点击劫持防御

1、framebusting
最古老的防御措施是一段用于禁止在 frame 中打开页面的 JavaScript 代码（所谓的 “framebusting”）。
if (top != window) {
top.location = window.location;
}
意思是说：如果 window 发现它不在顶部，那么它将自动使其自身位于顶部。
这个方法并不可靠，因为有许多方式可以绕过这个限制。下面我们就介绍几个。
阻止顶级导航
我们可以阻止因更改 beforeunload 事件处理程序中的 top.location 而引起的过渡（transition）。
顶级页面（从属于黑客）在 beforeunload 上设置了一个用于阻止的处理程序
window.onbeforeunload = function() {
return false;
}
;
当 iframe 试图更改 top.location 时，访问者会收到一条消息，询问他们是否要离开页面。
在大多数情况下，访问者会做出否定的回答，因为他们并不知道还有这么一个 iframe，他们所看到的只有顶级页面，他们没有理由离开。所以 top.location 不会变化！

2. X-Frame-Options
X-FRAME-OPTIONS是微软提出的一个http头，专门用来防御利用iframe嵌套的点击劫持攻击。并且在IE8、Firefox3.6、Chrome4以上的版本均能很好的支持。
可以设置为以下值:
DENY: 拒绝任何域加载
SAMEORIGIN: 允许同源域下加载
ALLOW-FROM: 可以定义允许frame加载的页面地址

3、Sandbox 特性
sandbox 特性的限制之一就是导航。沙箱化的 iframe 不能更改 top.location。
但我们可以添加具有 sandbox="allow-scripts allow-forms" 的 iframe。从而放开限制，允许脚本和表单。但我们没添加 allow-top-navigation，因此更改 top.location 是被禁止的。
```